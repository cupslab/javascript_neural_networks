(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.NeuralNet = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
function typedArraySupport(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(r){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(t){return this instanceof Buffer?(this.length=0,this.parent=void 0,"number"==typeof t?fromNumber(this,t):"string"==typeof t?fromString(this,t,arguments.length>1?arguments[1]:"utf8"):fromObject(this,t)):arguments.length>1?new Buffer(t,arguments[1]):new Buffer(t)}function fromNumber(t,e){if(t=allocate(t,0>e?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;e>r;r++)t[r]=0;return t}function fromString(t,e,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|byteLength(e,r);return t=allocate(t,n),t.write(e,r),t}function fromObject(t,e){if(Buffer.isBuffer(e))return fromBuffer(t,e);if(isArray(e))return fromArray(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return fromTypedArray(t,e);if(e instanceof ArrayBuffer)return fromArrayBuffer(t,e)}return e.length?fromArrayLike(t,e):fromJsonObject(t,e)}function fromBuffer(t,e){var r=0|checked(e.length);return t=allocate(t,r),e.copy(t,0,0,r),t}function fromArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function fromTypedArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(e.byteLength,t=Buffer._augment(new Uint8Array(e))):t=fromTypedArray(t,new Uint8Array(e)),t}function fromArrayLike(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function fromJsonObject(t,e){var r,n=0;"Buffer"===e.type&&isArray(e.data)&&(r=e.data,n=0|checked(r.length)),t=allocate(t,n);for(var i=0;n>i;i+=1)t[i]=255&r[i];return t}function allocate(t,e){Buffer.TYPED_ARRAY_SUPPORT?(t=Buffer._augment(new Uint8Array(e)),t.__proto__=Buffer.prototype):(t.length=e,t._isBuffer=!0);var r=0!==e&&e<=Buffer.poolSize>>>1;return r&&(t.parent=rootParent),t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t,e){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e);var r=new Buffer(t,e);return delete r.parent,r}function byteLength(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function hexWrite(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var f=e.length;if(f%2!==0)throw new Error("Invalid hex string");n>f/2&&(n=f/2);for(var o=0;n>o;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;r>i;){var f=t[i],o=null,u=f>239?4:f>223?3:f>191?2:1;if(r>=i+u){var s,a,h,c;switch(u){case 1:128>f&&(o=f);break;case 2:s=t[i+1],128===(192&s)&&(c=(31&f)<<6|63&s,c>127&&(o=c));break;case 3:s=t[i+1],a=t[i+2],128===(192&s)&&128===(192&a)&&(c=(15&f)<<12|(63&s)<<6|63&a,c>2047&&(55296>c||c>57343)&&(o=c));break;case 4:s=t[i+1],a=t[i+2],h=t[i+3],128===(192&s)&&128===(192&a)&&128===(192&h)&&(c=(15&f)<<18|(63&s)<<12|(63&a)<<6|63&h,c>65535&&1114112>c&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(MAX_ARGUMENTS_LENGTH>=e)return String.fromCharCode.apply(String,t);for(var r="",n=0;e>n;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(127&t[i]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function hexSlice(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",f=e;r>f;f++)i+=toHex(t[f]);return i}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),i="",f=0;f<n.length;f+=2)i+=String.fromCharCode(n[f]+256*n[f+1]);return i}function checkOffset(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,i,f){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||f>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,f=Math.min(t.length-r,2);f>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function objectWriteUInt32(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,f=Math.min(t.length-r,4);f>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function checkIEEE754(t,e,r,n,i,f){if(e>i||f>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,i){return i||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,i){return i||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return 16>t?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,i=null,f=[],o=0;n>o;o++){if(r=t.charCodeAt(o),r>55295&&57344>r){if(!i){if(r>56319){(e-=3)>-1&&f.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&f.push(239,191,189);continue}i=r;continue}if(56320>r){(e-=3)>-1&&f.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&f.push(239,191,189);if(i=null,128>r){if((e-=1)<0)break;f.push(r)}else if(2048>r){if((e-=2)<0)break;f.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;f.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(1114112>r))throw new Error("Invalid code point");if((e-=4)<0)break;f.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return f}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,i,f=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,i=r%256,f.push(i),f.push(n);return f}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var i=0;n>i&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("is-array");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,f=Math.min(r,n);f>i&&t[i]===e[i];)++i;return i!==f&&(r=t[i],n=e[i]),n>r?-1:r>n?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new Buffer(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),i=0;for(r=0;r<t.length;r++){var f=t[r];f.copy(n,i),i+=f.length}return n},Buffer.byteLength=byteLength,Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0,Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:Buffer.compare(this,t)},Buffer.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,i=0;r+i<t.length;i++)if(t[r+i]===e[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(Buffer.isBuffer(t))return r(this,t,e);if("number"==typeof t)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=e,e=0|r,r=i}var f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(0>r||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"binary":return binaryWrite(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var i=e-t;n=new Buffer(i,void 0);for(var f=0;i>f;f++)n[f]=this[f+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],i=1,f=0;++f<e&&(i*=256);)n+=this[t+f]*i;return n},Buffer.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],i=1,f=0;++f<e&&(i*=256);)n+=this[t+f]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=e,i=1,f=this[t+--n];n>0&&(i*=256);)f+=this[t+--n]*i;return i*=128,f>=i&&(f-=Math.pow(2,8*e)),f},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var i=1,f=0;for(this[e]=255&t;++f<r&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,f=1;for(this[e+i]=255&t;--i>=0&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);checkInt(this,t,e,r,i-1,-i)}var f=0,o=1,u=0>t?1:0;for(this[e]=255&t;++f<r&&(o*=256);)this[e+f]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);checkInt(this,t,e,r,i-1,-i)}var f=r-1,o=1,u=0>t?1:0;for(this[e+f]=255&t;--f>=0&&(o*=256);)this[e+f]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,f=n-r;if(this===t&&e>r&&n>e)for(i=f-1;i>=0;i--)t[i+e]=this[i+r];else if(1e3>f||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;f>i;i++)t[i+e]=this[i+r];else t._set(this.subarray(r,r+f),e);return f},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=utf8ToBytes(t.toString()),f=i.length;for(n=e;r>n;n++)this[n]=i[n%f]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.indexOf=BP.indexOf,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"base64-js":2,"ieee754":3,"is-array":4}],2:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:o>r?-1:o+10>r?r-o+26+26:i+26>r?r-i:A+26>r?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;c>n;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;h>n;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);
},{}],3:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=0>o||0===o&&0>1/o?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],4:[function(require,module,exports){
var isArray=Array.isArray,str=Object.prototype.toString;module.exports=isArray||function(r){return!!r&&"[object Array]"==str.call(r)};
},{}],5:[function(require,module,exports){
function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var e=setTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,clearTimeout(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];queue.push(new Item(e,n)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],6:[function(require,module,exports){
"use strict";function Procedure(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function compileCwise(r){var e=new Procedure;e.pre=r.pre,e.body=r.body,e.post=r.post;var s=r.args.slice(0);e.argTypes=s;for(var o=0;o<s.length;++o){var a=s[o];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[o]="array",e.arrayArgs.push(o),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(o),e.shimArgs.push("scalar"+o);else if("index"===a){if(e.indexArgs.push(o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(o),o<e.pre.args.length&&e.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<e.post.args.length&&e.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+s[o]);e.argTypes[o]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(o)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>s.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>s.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>s.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!r.printCode||!!r.debug,e.funcName=r.funcName||"cwise",e.blockSize=r.blockSize||64,createThunk(e)}var createThunk=require("./lib/thunk.js");module.exports=compileCwise;
},{"./lib/thunk.js":8}],7:[function(require,module,exports){
"use strict";function innerFill(r,n,e){var s,a,o=r.length,i=n.arrayArgs.length,t=n.indexArgs.length>0,p=[],h=[],u=0,c=0;for(s=0;o>s;++s)h.push(["i",s,"=0"].join(""));for(a=0;i>a;++a)for(s=0;o>s;++s)c=u,u=r[s],0===s?h.push(["d",a,"s",s,"=t",a,"p",u].join("")):h.push(["d",a,"s",s,"=(t",a,"p",u,"-s",c,"*t",a,"p",c,")"].join(""));for(p.push("var "+h.join(",")),s=o-1;s>=0;--s)u=r[s],p.push(["for(i",s,"=0;i",s,"<s",u,";++i",s,"){"].join(""));for(p.push(e),s=0;o>s;++s){for(c=u,u=r[s],a=0;i>a;++a)p.push(["p",a,"+=d",a,"s",s].join(""));t&&(s>0&&p.push(["index[",c,"]-=s",c].join("")),p.push(["++index[",u,"]"].join(""))),p.push("}")}return p.join("\n")}function outerFill(r,n,e,s){for(var a=n.length,o=e.arrayArgs.length,i=e.blockSize,t=e.indexArgs.length>0,p=[],h=0;o>h;++h)p.push(["var offset",h,"=p",h].join(""));for(var h=r;a>h;++h)p.push(["for(var j"+h+"=SS[",n[h],"]|0;j",h,">0;){"].join("")),p.push(["if(j",h,"<",i,"){"].join("")),p.push(["s",n[h],"=j",h].join("")),p.push(["j",h,"=0"].join("")),p.push(["}else{s",n[h],"=",i].join("")),p.push(["j",h,"-=",i,"}"].join("")),t&&p.push(["index[",n[h],"]=j",h].join(""));for(var h=0;o>h;++h){for(var u=["offset"+h],c=r;a>c;++c)u.push(["j",c,"*t",h,"p",n[c]].join(""));p.push(["p",h,"=(",u.join("+"),")"].join(""))}p.push(innerFill(n,e,s));for(var h=r;a>h;++h)p.push("}");return p.join("\n")}function countMatches(r){for(var n=0,e=r[0].length;e>n;){for(var s=1;s<r.length;++s)if(r[s][n]!==r[0][n])return n;++n}return n}function processBlock(r,n,e){for(var s=r.body,a=[],o=[],i=0;i<r.args.length;++i){var t=r.args[i];if(!(t.count<=0)){var p=new RegExp(t.name,"g"),h="",u=n.arrayArgs.indexOf(i);switch(n.argTypes[i]){case"offset":var c=n.offsetArgIndex.indexOf(i),l=n.offsetArgs[c];u=l.array,h="+q"+c;case"array":h="p"+u+h;var f="l"+i,g="a"+u;if(0===n.arrayBlockIndices[u])1===t.count?"generic"===e[u]?t.lvalue?(a.push(["var ",f,"=",g,".get(",h,")"].join("")),s=s.replace(p,f),o.push([g,".set(",h,",",f,")"].join(""))):s=s.replace(p,[g,".get(",h,")"].join("")):s=s.replace(p,[g,"[",h,"]"].join("")):"generic"===e[u]?(a.push(["var ",f,"=",g,".get(",h,")"].join("")),s=s.replace(p,f),t.lvalue&&o.push([g,".set(",h,",",f,")"].join(""))):(a.push(["var ",f,"=",g,"[",h,"]"].join("")),s=s.replace(p,f),t.lvalue&&o.push([g,"[",h,"]=",f].join("")));else{for(var j=[t.name],v=[h],y=0;y<Math.abs(n.arrayBlockIndices[u]);y++)j.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(y+1)+"*t"+u+"b"+y);if(p=new RegExp(j.join(""),"g"),h=v.join("+"),"generic"===e[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");s=s.replace(p,[g,"[",h,"]"].join(""))}break;case"scalar":s=s.replace(p,"Y"+n.scalarArgs.indexOf(i));break;case"index":s=s.replace(p,"index");break;case"shape":s=s.replace(p,"shape")}}}return[a.join("\n"),s,o.join("\n")].join("\n").trim()}function typeSummary(r){for(var n=new Array(r.length),e=!0,s=0;s<r.length;++s){var a=r[s],o=a.match(/\d+/);o=o?o[0]:"",0===a.charAt(0)?n[s]="u"+a.charAt(1)+o:n[s]=a.charAt(0)+o,s>0&&(e=e&&n[s]===n[s-1])}return e?n[0]:n.join("")}function generateCWiseOp(r,n){for(var e=n[1].length-Math.abs(r.arrayBlockIndices[0])|0,s=new Array(r.arrayArgs.length),a=new Array(r.arrayArgs.length),o=0;o<r.arrayArgs.length;++o)a[o]=n[2*o],s[o]=n[2*o+1];for(var i=[],t=[],p=[],h=[],u=[],o=0;o<r.arrayArgs.length;++o){r.arrayBlockIndices[o]<0?(p.push(0),h.push(e),i.push(e),t.push(e+r.arrayBlockIndices[o])):(p.push(r.arrayBlockIndices[o]),h.push(r.arrayBlockIndices[o]+e),i.push(0),t.push(r.arrayBlockIndices[o]));for(var c=[],l=0;l<s[o].length;l++)p[o]<=s[o][l]&&s[o][l]<h[o]&&c.push(s[o][l]-p[o]);u.push(c)}for(var f=["SS"],g=["'use strict'"],j=[],l=0;e>l;++l)j.push(["s",l,"=SS[",l,"]"].join(""));for(var o=0;o<r.arrayArgs.length;++o){f.push("a"+o),f.push("t"+o),f.push("p"+o);for(var l=0;e>l;++l)j.push(["t",o,"p",l,"=t",o,"[",p[o]+l,"]"].join(""));for(var l=0;l<Math.abs(r.arrayBlockIndices[o]);++l)j.push(["t",o,"b",l,"=t",o,"[",i[o]+l,"]"].join(""))}for(var o=0;o<r.scalarArgs.length;++o)f.push("Y"+o);if(r.shapeArgs.length>0&&j.push("shape=SS.slice(0)"),r.indexArgs.length>0){for(var v=new Array(e),o=0;e>o;++o)v[o]="0";j.push(["index=[",v.join(","),"]"].join(""))}for(var o=0;o<r.offsetArgs.length;++o){for(var y=r.offsetArgs[o],d=[],l=0;l<y.offset.length;++l)0!==y.offset[l]&&(1===y.offset[l]?d.push(["t",y.array,"p",l].join("")):d.push([y.offset[l],"*t",y.array,"p",l].join("")));0===d.length?j.push("q"+o+"=0"):j.push(["q",o,"=",d.join("+")].join(""))}var A=uniq([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));j=j.concat(A),g.push("var "+j.join(","));for(var o=0;o<r.arrayArgs.length;++o)g.push("p"+o+"|=0");r.pre.body.length>3&&g.push(processBlock(r.pre,r,a));var k=processBlock(r.body,r,a),b=countMatches(u);e>b?g.push(outerFill(b,u[0],r,k)):g.push(innerFill(u[0],r,k)),r.post.body.length>3&&g.push(processBlock(r.post,r,a)),r.debug&&console.log("-----Generated cwise routine for ",n,":\n"+g.join("\n")+"\n----------");var x=[r.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",b,typeSummary(a)].join(""),w=new Function(["function ",x,"(",f.join(","),"){",g.join("\n"),"} return ",x].join(""));return w()}var uniq=require("uniq");module.exports=generateCWiseOp;
},{"uniq":9}],8:[function(require,module,exports){
"use strict";function createThunk(r){var a=["'use strict'","var CACHED={}"],e=[],s=r.funcName+"_cwise_thunk";a.push(["return function ",s,"(",r.shimArgs.join(","),"){"].join(""));for(var n=[],o=[],h=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],i=[],p=[],t=0;t<r.arrayArgs.length;++t){var c=r.arrayArgs[t];e.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),n.push("t"+c),n.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),h.push("array"+c+".data"),h.push("array"+c+".stride"),h.push("array"+c+".offset|0"),t>0&&(i.push("array"+r.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[t]))),p.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[t])+"]"))}r.arrayArgs.length>1&&(a.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),a.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),a.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),a.push("}"));for(var t=0;t<r.scalarArgs.length;++t)h.push("scalar"+r.scalarArgs[t]);e.push(["type=[",o.join(","),"].join()"].join("")),e.push("proc=CACHED[type]"),a.push("var "+e.join(",")),a.push(["if(!proc){","CACHED[type]=proc=compile([",n.join(","),"])}","return proc(",h.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+a.join("\n")+"\n----------");var u=new Function("compile",a.join("\n"));return u(compile.bind(void 0,r))}var compile=require("./compile.js");module.exports=createThunk;
},{"./compile.js":7}],9:[function(require,module,exports){
"use strict";function unique_pred(n,e){for(var u=1,t=n.length,i=n[0],r=n[0],o=1;t>o;++o)if(r=i,i=n[o],e(i,r)){if(o===u){u++;continue}n[u++]=i}return n.length=u,n}function unique_eq(n){for(var e=1,u=n.length,t=n[0],i=n[0],r=1;u>r;++r,i=t)if(i=t,t=n[r],t!==i){if(r===e){e++;continue}n[e++]=t}return n.length=e,n}function unique(n,e,u){return 0===n.length?n:e?(u||n.sort(e),unique_pred(n,e)):(u||n.sort(),unique_eq(n))}module.exports=unique;
},{}],10:[function(require,module,exports){
"use strict";function createCWise(e){for(var r in e)REQUIRED_FIELDS.indexOf(r)<0&&OPTIONAL_FIELDS.indexOf(r)<0&&console.warn("cwise: Unknown argument '"+r+"' passed to expression compiler");for(var o=0;o<REQUIRED_FIELDS.length;++o)if(!e[REQUIRED_FIELDS[o]])throw new Error("cwise: Missing argument: "+REQUIRED_FIELDS[o]);return compile({args:e.args,pre:parse(e.pre||function(){}),body:parse(e.body),post:parse(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}var parse=require("cwise-parser"),compile=require("cwise-compiler"),REQUIRED_FIELDS=["args","body"],OPTIONAL_FIELDS=["pre","post","printCode","funcName","blockSize"];module.exports=createCWise;
},{"cwise-compiler":6,"cwise-parser":12}],11:[function(require,module,exports){
module.exports=require("cwise-compiler");
},{"cwise-compiler":6}],12:[function(require,module,exports){
"use strict";function CompiledArgument(e,r,n){this.name=e,this.lvalue=r,this.rvalue=n,this.count=0}function CompiledRoutine(e,r,n,t){this.body=e,this.args=r,this.thisVars=n,this.localVars=t}function isGlobal(e){if("eval"===e)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?e in window:"undefined"!=typeof GLOBAL?e in GLOBAL:"undefined"!=typeof self?e in self:!1}function getArgNames(e){for(var r=e.body[0].expression.callee.params,n=new Array(r.length),t=0;t<r.length;++t)n[t]=r[t].name;return n}function preprocess(e){function r(e){var r=l+e.replace(/\_/g,"__");return y.push(r),r}function n(e){var r="this_"+e.replace(/\_/g,"__");return d.push(r),r}function t(e,r){for(var n=e.range[0],t=e.range[1],i=n+1;t>i;++i)g[i]="";g[n]=r}function i(e){return"'"+e.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function o(e){return g.slice(e.range[0],e.range[1]).join("")}function a(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?m:m|v:"UpdateExpression"===e.parent.type?m|v:v}for(var s=["(",e,")()"].join(""),p=esprima.parse(s,{range:!0}),l="_inline_"+PREFIX_COUNTER++ +"_",u=getArgNames(p),f=new Array(u.length),c=0;c<u.length;++c)f[c]=new CompiledArgument([l,"arg",c,"_"].join(""),!1,!1);for(var g=new Array(s.length),c=0,h=s.length;h>c;++c)g[c]=s.charAt(c);var y=[],d=[],m=1,v=2;!function _(e,o){if(e.parent=o,"MemberExpression"===e.type)e.computed?(_(e.object,e),_(e.property,e)):"ThisExpression"===e.object.type?t(e,n(e.property.name)):_(e.object,e);else{if("ThisExpression"===e.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===e.type){var s=e.name,p=u.indexOf(s);if(p>=0){var l=f[p],c=a(e);c&m&&(l.lvalue=!0),c&v&&(l.rvalue=!0),++l.count,t(e,l.name)}else isGlobal(s)||t(e,r(s))}else if("Literal"===e.type)"string"==typeof e.value&&t(e,i(e.value));else{if("WithStatement"===e.type)throw new Error("cwise-parser: with() statements not allowed");for(var g=Object.keys(e),h=0,y=g.length;y>h;++h)if("parent"!==g[h]){var d=e[g[h]];if(d)if(d instanceof Array)for(var w=0;w<d.length;++w)d[w]&&"string"==typeof d[w].type&&_(d[w],e);else"string"==typeof d.type&&_(d,e)}}}}(p.body[0].expression.callee.body,void 0),uniq(y),uniq(d);var w=new CompiledRoutine(o(p.body[0].expression.callee.body),f,d,y);return w}var esprima=require("esprima"),uniq=require("uniq"),PREFIX_COUNTER=0;module.exports=preprocess;
},{"esprima":13,"uniq":14}],13:[function(require,module,exports){
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof exports?exports:e.esprima={})}(this,function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function n(e){return e>=48&&57>=e}function r(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function a(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function o(e){return 10===e||13===e||8232===e||8233===e}function c(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&it.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function u(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&it.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function l(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function s(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function m(e){return"eval"===e||"arguments"===e}function d(e){if(ut&&s(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function f(e,n,r,a,i){var o;t("number"==typeof r,"Comment must have valid position"),yt.lastCommentStart>=r||(yt.lastCommentStart=r,o={type:e,value:n},ht.range&&(o.range=[r,a]),ht.loc&&(o.loc=i),ht.comments.push(o),ht.attachComment&&(ht.leadingComments.push(o),ht.trailingComments.push(o)))}function p(e){var t,n,r,a;for(t=lt-e,n={start:{line:st,column:lt-mt-e}};dt>lt;)if(r=ct.charCodeAt(lt),++lt,o(r))return ht.comments&&(a=ct.slice(t+e,lt-1),n.end={line:st,column:lt-mt-1},f("Line",a,t,lt-1,n)),13===r&&10===ct.charCodeAt(lt)&&++lt,++st,void(mt=lt);ht.comments&&(a=ct.slice(t+e,lt),n.end={line:st,column:lt-mt},f("Line",a,t,lt,n))}function y(){var e,t,n,r;for(ht.comments&&(e=lt-2,t={start:{line:st,column:lt-mt-2}});dt>lt;)if(n=ct.charCodeAt(lt),o(n))13===n&&10===ct.charCodeAt(lt+1)&&++lt,++st,++lt,mt=lt,lt>=dt&&K({},at.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===ct.charCodeAt(lt+1))return++lt,++lt,void(ht.comments&&(r=ct.slice(e+2,lt-2),t.end={line:st,column:lt-mt},f("Block",r,e,lt,t)));++lt}else++lt;K({},at.UnexpectedToken,"ILLEGAL")}function h(){var e,t;for(t=0===lt;dt>lt;)if(e=ct.charCodeAt(lt),i(e))++lt;else if(o(e))++lt,13===e&&10===ct.charCodeAt(lt)&&++lt,++st,mt=lt,t=!0;else if(47===e)if(e=ct.charCodeAt(lt+1),47===e)++lt,++lt,p(2),t=!0;else{if(42!==e)break;++lt,++lt,y()}else if(t&&45===e){if(45!==ct.charCodeAt(lt+1)||62!==ct.charCodeAt(lt+2))break;lt+=3,p(3)}else{if(60!==e)break;if("!--"!==ct.slice(lt+1,lt+4))break;++lt,++lt,++lt,++lt,p(4)}}function S(e){var t,n,a,i=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(dt>lt&&r(ct[lt])))return"";a=ct[lt++],i=16*i+"0123456789abcdef".indexOf(a.toLowerCase())}return String.fromCharCode(i)}function g(){var e,t;for(e=ct.charCodeAt(lt++),t=String.fromCharCode(e),92===e&&(117!==ct.charCodeAt(lt)&&K({},at.UnexpectedToken,"ILLEGAL"),++lt,e=S("u"),e&&"\\"!==e&&c(e.charCodeAt(0))||K({},at.UnexpectedToken,"ILLEGAL"),t=e);dt>lt&&(e=ct.charCodeAt(lt),u(e));)++lt,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==ct.charCodeAt(lt)&&K({},at.UnexpectedToken,"ILLEGAL"),++lt,e=S("u"),e&&"\\"!==e&&u(e.charCodeAt(0))||K({},at.UnexpectedToken,"ILLEGAL"),t+=e);return t}function v(){var e,t;for(e=lt++;dt>lt;){if(t=ct.charCodeAt(lt),92===t)return lt=e,g();if(!u(t))break;++lt}return ct.slice(e,lt)}function k(){var e,t,n;return e=lt,t=92===ct.charCodeAt(lt)?g():v(),n=1===t.length?_e.Identifier:d(t)?_e.Keyword:"null"===t?_e.NullLiteral:"true"===t||"false"===t?_e.BooleanLiteral:_e.Identifier,{type:n,value:t,lineNumber:st,lineStart:mt,start:e,end:lt}}function b(){var e,t,n,r,a=lt,i=ct.charCodeAt(lt),o=ct[lt];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++lt,ht.tokenize&&(40===i?ht.openParenToken=ht.tokens.length:123===i&&(ht.openCurlyToken=ht.tokens.length)),{type:_e.Punctuator,value:String.fromCharCode(i),lineNumber:st,lineStart:mt,start:a,end:lt};default:if(e=ct.charCodeAt(lt+1),61===e)switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return lt+=2,{type:_e.Punctuator,value:String.fromCharCode(i)+String.fromCharCode(e),lineNumber:st,lineStart:mt,start:a,end:lt};case 33:case 61:return lt+=2,61===ct.charCodeAt(lt)&&++lt,{type:_e.Punctuator,value:ct.slice(a,lt),lineNumber:st,lineStart:mt,start:a,end:lt}}}return r=ct.substr(lt,4),">>>="===r?(lt+=4,{type:_e.Punctuator,value:r,lineNumber:st,lineStart:mt,start:a,end:lt}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(lt+=3,{type:_e.Punctuator,value:n,lineNumber:st,lineStart:mt,start:a,end:lt}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(lt+=2,{type:_e.Punctuator,value:t,lineNumber:st,lineStart:mt,start:a,end:lt}):"<>=!+-*%&|^/".indexOf(o)>=0?(++lt,{type:_e.Punctuator,value:o,lineNumber:st,lineStart:mt,start:a,end:lt}):void K({},at.UnexpectedToken,"ILLEGAL")))}function E(e){for(var t="";dt>lt&&r(ct[lt]);)t+=ct[lt++];return 0===t.length&&K({},at.UnexpectedToken,"ILLEGAL"),c(ct.charCodeAt(lt))&&K({},at.UnexpectedToken,"ILLEGAL"),{type:_e.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:st,lineStart:mt,start:e,end:lt}}function x(e){for(var t="0"+ct[lt++];dt>lt&&a(ct[lt]);)t+=ct[lt++];return(c(ct.charCodeAt(lt))||n(ct.charCodeAt(lt)))&&K({},at.UnexpectedToken,"ILLEGAL"),{type:_e.NumericLiteral,value:parseInt(t,8),octal:!0,lineNumber:st,lineStart:mt,start:e,end:lt}}function C(){var e,t;for(e=lt+1;dt>e;++e){if(t=ct[e],"8"===t||"9"===t)return!1;if(!a(t))return!0}return!0}function w(){var e,r,i;if(i=ct[lt],t(n(i.charCodeAt(0))||"."===i,"Numeric literal must start with a decimal digit or a decimal point"),r=lt,e="","."!==i){if(e=ct[lt++],i=ct[lt],"0"===e){if("x"===i||"X"===i)return++lt,E(r);if(a(i)&&C())return x(r)}for(;n(ct.charCodeAt(lt));)e+=ct[lt++];i=ct[lt]}if("."===i){for(e+=ct[lt++];n(ct.charCodeAt(lt));)e+=ct[lt++];i=ct[lt]}if("e"===i||"E"===i)if(e+=ct[lt++],i=ct[lt],("+"===i||"-"===i)&&(e+=ct[lt++]),n(ct.charCodeAt(lt)))for(;n(ct.charCodeAt(lt));)e+=ct[lt++];else K({},at.UnexpectedToken,"ILLEGAL");return c(ct.charCodeAt(lt))&&K({},at.UnexpectedToken,"ILLEGAL"),{type:_e.NumericLiteral,value:parseFloat(e),lineNumber:st,lineStart:mt,start:r,end:lt}}function I(){var e,n,r,i,c,u,l,s,m="",d=!1;for(l=st,s=mt,e=ct[lt],t("'"===e||'"'===e,"String literal must starts with a quote"),n=lt,++lt;dt>lt;){if(r=ct[lt++],r===e){e="";break}if("\\"===r)if(r=ct[lt++],r&&o(r.charCodeAt(0)))++st,"\r"===r&&"\n"===ct[lt]&&++lt,mt=lt;else switch(r){case"u":case"x":u=lt,c=S(r),c?m+=c:(lt=u,m+=r);break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="	";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\x0B";break;default:a(r)?(i="01234567".indexOf(r),0!==i&&(d=!0),dt>lt&&a(ct[lt])&&(d=!0,i=8*i+"01234567".indexOf(ct[lt++]),"0123".indexOf(r)>=0&&dt>lt&&a(ct[lt])&&(i=8*i+"01234567".indexOf(ct[lt++]))),m+=String.fromCharCode(i)):m+=r}else{if(o(r.charCodeAt(0)))break;m+=r}}return""!==e&&K({},at.UnexpectedToken,"ILLEGAL"),{type:_e.StringLiteral,value:m,octal:d,startLineNumber:l,startLineStart:s,lineNumber:st,lineStart:mt,start:n,end:lt}}function L(e,t){var n;try{n=new RegExp(e,t)}catch(r){K({},at.InvalidRegExp)}return n}function A(){var e,n,r,a,i;for(e=ct[lt],t("/"===e,"Regular expression literal must start with a slash"),n=ct[lt++],r=!1,a=!1;dt>lt;)if(e=ct[lt++],n+=e,"\\"===e)e=ct[lt++],o(e.charCodeAt(0))&&K({},at.UnterminatedRegExp),n+=e;else if(o(e.charCodeAt(0)))K({},at.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){a=!0;break}"["===e&&(r=!0)}return a||K({},at.UnterminatedRegExp),i=n.substr(1,n.length-2),{value:i,literal:n}}function P(){var e,t,n,r;for(t="",n="";dt>lt&&(e=ct[lt],u(e.charCodeAt(0)));)if(++lt,"\\"===e&&dt>lt)if(e=ct[lt],"u"===e){if(++lt,r=lt,e=S("u"))for(n+=e,t+="\\u";lt>r;++r)t+=ct[r];else lt=r,n+="u",t+="\\u";V({},at.UnexpectedToken,"ILLEGAL")}else t+="\\",V({},at.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function N(){var e,t,n,r;return pt=null,h(),e=lt,t=A(),n=P(),r=L(t.value,n.value),ht.tokenize?{type:_e.RegularExpression,value:r,lineNumber:st,lineStart:mt,start:e,end:lt}:{literal:t.literal+n.literal,value:r,start:e,end:lt}}function O(){var e,t,n,r;return h(),e=lt,t={start:{line:st,column:lt-mt}},n=N(),t.end={line:st,column:lt-mt},ht.tokenize||(ht.tokens.length>0&&(r=ht.tokens[ht.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"===r.value||"/="===r.value)&&ht.tokens.pop()),ht.tokens.push({type:"RegularExpression",value:n.literal,range:[e,lt],loc:t})),n}function U(e){return e.type===_e.Identifier||e.type===_e.Keyword||e.type===_e.BooleanLiteral||e.type===_e.NullLiteral}function R(){var e,t;if(e=ht.tokens[ht.tokens.length-1],!e)return O();if("Punctuator"===e.type){if("]"===e.value)return b();if(")"===e.value)return t=ht.tokens[ht.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?b():O();if("}"===e.value){if(ht.tokens[ht.openCurlyToken-3]&&"Keyword"===ht.tokens[ht.openCurlyToken-3].type){if(t=ht.tokens[ht.openCurlyToken-4],!t)return b()}else{if(!ht.tokens[ht.openCurlyToken-4]||"Keyword"!==ht.tokens[ht.openCurlyToken-4].type)return b();if(t=ht.tokens[ht.openCurlyToken-5],!t)return O()}return tt.indexOf(t.value)>=0?b():O()}return O()}return"Keyword"===e.type&&"this"!==e.value?O():b()}function F(){var e;return h(),lt>=dt?{type:_e.EOF,lineNumber:st,lineStart:mt,start:lt,end:lt}:(e=ct.charCodeAt(lt),c(e)?k():40===e||41===e||59===e?b():39===e||34===e?I():46===e?n(ct.charCodeAt(lt+1))?w():b():n(e)?w():ht.tokenize&&47===e?R():b())}function T(){var e,t,n;return h(),e={start:{line:st,column:lt-mt}},t=F(),e.end={line:st,column:lt-mt},t.type!==_e.EOF&&(n=ct.slice(t.start,t.end),ht.tokens.push({type:et[t.type],value:n,range:[t.start,t.end],loc:e})),t}function D(){var e;return e=pt,lt=e.end,st=e.lineNumber,mt=e.lineStart,pt="undefined"!=typeof ht.tokens?T():F(),lt=e.end,st=e.lineNumber,mt=e.lineStart,e}function B(){var e,t,n;e=lt,t=st,n=mt,pt="undefined"!=typeof ht.tokens?T():F(),lt=e,st=t,mt=n}function W(e,t){this.line=e,this.column=t}function j(e,t,n,r){this.start=new W(e,t),this.end=new W(n,r)}function G(){var e,t,n,r;return e=lt,t=st,n=mt,h(),r=st!==t,lt=e,st=t,mt=n,r}function K(e,n){var r,a=Array.prototype.slice.call(arguments,2),i=n.replace(/%(\d)/g,function(e,n){return t(n<a.length,"Message reference must be in range"),a[n]});throw"number"==typeof e.lineNumber?(r=new Error("Line "+e.lineNumber+": "+i),r.index=e.start,r.lineNumber=e.lineNumber,r.column=e.start-mt+1):(r=new Error("Line "+st+": "+i),r.index=lt,r.lineNumber=st,r.column=lt-mt+1),r.description=i,r}function V(){try{K.apply(null,arguments)}catch(e){if(!ht.errors)throw e;ht.errors.push(e)}}function M(e){if(e.type===_e.EOF&&K(e,at.UnexpectedEOS),e.type===_e.NumericLiteral&&K(e,at.UnexpectedNumber),e.type===_e.StringLiteral&&K(e,at.UnexpectedString),e.type===_e.Identifier&&K(e,at.UnexpectedIdentifier),e.type===_e.Keyword){if(l(e.value))K(e,at.UnexpectedReserved);else if(ut&&s(e.value))return void V(e,at.StrictReservedWord);K(e,at.UnexpectedToken,e.value)}K(e,at.UnexpectedToken,e.value)}function H(e){var t=D();(t.type!==_e.Punctuator||t.value!==e)&&M(t)}function q(e){var t=D();(t.type!==_e.Keyword||t.value!==e)&&M(t)}function z(e){return pt.type===_e.Punctuator&&pt.value===e}function $(e){return pt.type===_e.Keyword&&pt.value===e}function X(){var e;return pt.type!==_e.Punctuator?!1:(e=pt.value,"="===e||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function J(){var e,t=lt,n=st,r=mt,a=pt;return 59===ct.charCodeAt(lt)||z(";")?void D():(e=st,h(),st!==e?(lt=t,st=n,mt=r,void(pt=a)):void(pt.type===_e.EOF||z("}")||M(pt)))}function Q(e){return e.type===nt.Identifier||e.type===nt.MemberExpression}function Y(){var e,t=[];for(e=pt,H("[");!z("]");)z(",")?(D(),t.push(null)):(t.push(he()),z("]")||H(","));return D(),ft.markEnd(ft.createArrayExpression(t),e)}function Z(e,t){var n,r,a;return n=ut,a=pt,r=Me(),t&&ut&&m(e[0].name)&&V(t,at.StrictParamName),ut=n,ft.markEnd(ft.createFunctionExpression(null,e,[],r),a)}function _(){var e,t;return t=pt,e=D(),e.type===_e.StringLiteral||e.type===_e.NumericLiteral?(ut&&e.octal&&V(e,at.StrictOctalLiteral),ft.markEnd(ft.createLiteral(e),t)):ft.markEnd(ft.createIdentifier(e.value),t)}function ee(){var e,t,n,r,a,i;return e=pt,i=pt,e.type===_e.Identifier?(n=_(),"get"!==e.value||z(":")?"set"!==e.value||z(":")?(H(":"),r=he(),ft.markEnd(ft.createProperty("init",n,r),i)):(t=_(),H("("),e=pt,e.type!==_e.Identifier?(H(")"),V(e,at.UnexpectedToken,e.value),r=Z([])):(a=[ke()],H(")"),r=Z(a,e)),ft.markEnd(ft.createProperty("set",t,r),i)):(t=_(),H("("),H(")"),r=Z([]),ft.markEnd(ft.createProperty("get",t,r),i))):e.type!==_e.EOF&&e.type!==_e.Punctuator?(t=_(),H(":"),r=he(),ft.markEnd(ft.createProperty("init",t,r),i)):void M(e)}function te(){var e,t,n,r,a,i=[],o={},c=String;for(a=pt,H("{");!z("}");)e=ee(),t=e.key.type===nt.Identifier?e.key.name:c(e.key.value),r="init"===e.kind?rt.Data:"get"===e.kind?rt.Get:rt.Set,n="$"+t,Object.prototype.hasOwnProperty.call(o,n)?(o[n]===rt.Data?ut&&r===rt.Data?V({},at.StrictDuplicateProperty):r!==rt.Data&&V({},at.AccessorDataProperty):r===rt.Data?V({},at.AccessorDataProperty):o[n]&r&&V({},at.AccessorGetSet),o[n]|=r):o[n]=r,i.push(e),z("}")||H(",");return H("}"),ft.markEnd(ft.createObjectExpression(i),a)}function ne(){var e;return H("("),e=Se(),H(")"),e}function re(){var e,t,n,r;if(z("("))return ne();if(z("["))return Y();if(z("{"))return te();if(e=pt.type,r=pt,e===_e.Identifier)n=ft.createIdentifier(D().value);else if(e===_e.StringLiteral||e===_e.NumericLiteral)ut&&pt.octal&&V(pt,at.StrictOctalLiteral),n=ft.createLiteral(D());else if(e===_e.Keyword){if($("function"))return ze();$("this")?(D(),n=ft.createThisExpression()):M(D())}else e===_e.BooleanLiteral?(t=D(),t.value="true"===t.value,n=ft.createLiteral(t)):e===_e.NullLiteral?(t=D(),t.value=null,n=ft.createLiteral(t)):z("/")||z("/=")?(n="undefined"!=typeof ht.tokens?ft.createLiteral(O()):ft.createLiteral(N()),B()):M(D());return ft.markEnd(n,r)}function ae(){var e=[];if(H("("),!z(")"))for(;dt>lt&&(e.push(he()),!z(")"));)H(",");return H(")"),e}function ie(){var e,t;return t=pt,e=D(),U(e)||M(e),ft.markEnd(ft.createIdentifier(e.value),t)}function oe(){return H("."),ie()}function ce(){var e;return H("["),e=Se(),H("]"),e}function ue(){var e,t,n;return n=pt,q("new"),e=se(),t=z("(")?ae():[],ft.markEnd(ft.createNewExpression(e,t),n)}function le(){var e,t,n,r,a=yt.allowIn;for(r=pt,yt.allowIn=!0,e=$("new")?ue():re();;){if(z("."))n=oe(),e=ft.createMemberExpression(".",e,n);else if(z("("))t=ae(),e=ft.createCallExpression(e,t);else{if(!z("["))break;n=ce(),e=ft.createMemberExpression("[",e,n)}ft.markEnd(e,r)}return yt.allowIn=a,e}function se(){var e,n,r;for(t(yt.allowIn,"callee of new expression always allow in keyword."),r=pt,e=$("new")?ue():re();z(".")||z("[");)z("[")?(n=ce(),e=ft.createMemberExpression("[",e,n)):(n=oe(),e=ft.createMemberExpression(".",e,n)),ft.markEnd(e,r);return e}function me(){var e,t,n=pt;return e=le(),pt.type===_e.Punctuator&&(!z("++")&&!z("--")||G()||(ut&&e.type===nt.Identifier&&m(e.name)&&V({},at.StrictLHSPostfix),Q(e)||V({},at.InvalidLHSInAssignment),t=D(),e=ft.markEnd(ft.createPostfixExpression(t.value,e),n))),e}function de(){var e,t,n;return pt.type!==_e.Punctuator&&pt.type!==_e.Keyword?t=me():z("++")||z("--")?(n=pt,e=D(),t=de(),ut&&t.type===nt.Identifier&&m(t.name)&&V({},at.StrictLHSPrefix),Q(t)||V({},at.InvalidLHSInAssignment),t=ft.createUnaryExpression(e.value,t),t=ft.markEnd(t,n)):z("+")||z("-")||z("~")||z("!")?(n=pt,e=D(),t=de(),t=ft.createUnaryExpression(e.value,t),t=ft.markEnd(t,n)):$("delete")||$("void")||$("typeof")?(n=pt,e=D(),t=de(),t=ft.createUnaryExpression(e.value,t),t=ft.markEnd(t,n),ut&&"delete"===t.operator&&t.argument.type===nt.Identifier&&V({},at.StrictDelete)):t=me(),t}function fe(e,t){var n=0;if(e.type!==_e.Punctuator&&e.type!==_e.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function pe(){var e,t,n,r,a,i,o,c,u,l;if(e=pt,u=de(),r=pt,a=fe(r,yt.allowIn),0===a)return u;for(r.prec=a,D(),t=[e,pt],o=de(),i=[u,r,o];(a=fe(pt,yt.allowIn))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),c=i.pop().value,u=i.pop(),n=ft.createBinaryExpression(c,u,o),t.pop(),e=t[t.length-1],ft.markEnd(n,e),i.push(n);r=D(),r.prec=a,i.push(r),t.push(pt),n=de(),i.push(n)}for(l=i.length-1,n=i[l],t.pop();l>1;)n=ft.createBinaryExpression(i[l-1].value,i[l-2],n),l-=2,e=t.pop(),ft.markEnd(n,e);return n}function ye(){var e,t,n,r,a;return a=pt,e=pe(),z("?")&&(D(),t=yt.allowIn,yt.allowIn=!0,n=he(),yt.allowIn=t,H(":"),r=he(),e=ft.createConditionalExpression(e,n,r),ft.markEnd(e,a)),e}function he(){var e,t,n,r,a;return e=pt,a=pt,r=t=ye(),X()&&(Q(t)||V({},at.InvalidLHSInAssignment),ut&&t.type===nt.Identifier&&m(t.name)&&V(e,at.StrictLHSAssignment),e=D(),n=he(),r=ft.markEnd(ft.createAssignmentExpression(e.value,t,n),a)),r}function Se(){var e,t=pt;if(e=he(),z(",")){for(e=ft.createSequenceExpression([e]);dt>lt&&z(",");)D(),e.expressions.push(he());ft.markEnd(e,t)}return e}function ge(){for(var e,t=[];dt>lt&&!z("}")&&(e=$e(),"undefined"!=typeof e);)t.push(e);return t}function ve(){var e,t;return t=pt,H("{"),e=ge(),H("}"),ft.markEnd(ft.createBlockStatement(e),t)}function ke(){var e,t;return t=pt,e=D(),e.type!==_e.Identifier&&M(e),ft.markEnd(ft.createIdentifier(e.value),t)}function be(e){var t,n,r=null;return n=pt,t=ke(),ut&&m(t.name)&&V({},at.StrictVarName),"const"===e?(H("="),r=he()):z("=")&&(D(),r=he()),ft.markEnd(ft.createVariableDeclarator(t,r),n)}function Ee(e){var t=[];do{if(t.push(be(e)),!z(","))break;D()}while(dt>lt);return t}function xe(){var e;return q("var"),e=Ee(),J(),ft.createVariableDeclaration(e,"var")}function Ce(e){var t,n;return n=pt,q(e),t=Ee(e),J(),ft.markEnd(ft.createVariableDeclaration(t,e),n)}function we(){return H(";"),ft.createEmptyStatement()}function Ie(){var e=Se();return J(),ft.createExpressionStatement(e)}function Le(){var e,t,n;return q("if"),H("("),e=Se(),H(")"),t=Ve(),$("else")?(D(),n=Ve()):n=null,ft.createIfStatement(e,t,n)}function Ae(){var e,t,n;return q("do"),n=yt.inIteration,yt.inIteration=!0,e=Ve(),yt.inIteration=n,q("while"),H("("),t=Se(),H(")"),z(";")&&D(),ft.createDoWhileStatement(e,t)}function Pe(){var e,t,n;return q("while"),H("("),e=Se(),H(")"),n=yt.inIteration,yt.inIteration=!0,t=Ve(),yt.inIteration=n,ft.createWhileStatement(e,t)}function Ne(){var e,t,n;return n=pt,e=D(),t=Ee(),ft.markEnd(ft.createVariableDeclaration(t,e.value),n)}function Oe(){var e,t,n,r,a,i,o,c=yt.allowIn;return e=t=n=null,q("for"),H("("),z(";")?D():($("var")||$("let")?(yt.allowIn=!1,e=Ne(),yt.allowIn=c,1===e.declarations.length&&$("in")&&(D(),r=e,a=Se(),e=null)):(yt.allowIn=!1,e=Se(),yt.allowIn=c,$("in")&&(Q(e)||V({},at.InvalidLHSInForIn),D(),r=e,a=Se(),e=null)),"undefined"==typeof r&&H(";")),"undefined"==typeof r&&(z(";")||(t=Se()),H(";"),z(")")||(n=Se())),H(")"),o=yt.inIteration,yt.inIteration=!0,i=Ve(),yt.inIteration=o,"undefined"==typeof r?ft.createForStatement(e,t,n,i):ft.createForInStatement(r,a,i)}function Ue(){var e,t=null;return q("continue"),59===ct.charCodeAt(lt)?(D(),yt.inIteration||K({},at.IllegalContinue),ft.createContinueStatement(null)):G()?(yt.inIteration||K({},at.IllegalContinue),ft.createContinueStatement(null)):(pt.type===_e.Identifier&&(t=ke(),e="$"+t.name,Object.prototype.hasOwnProperty.call(yt.labelSet,e)||K({},at.UnknownLabel,t.name)),J(),null!==t||yt.inIteration||K({},at.IllegalContinue),ft.createContinueStatement(t))}function Re(){var e,t=null;return q("break"),59===ct.charCodeAt(lt)?(D(),yt.inIteration||yt.inSwitch||K({},at.IllegalBreak),ft.createBreakStatement(null)):G()?(yt.inIteration||yt.inSwitch||K({},at.IllegalBreak),ft.createBreakStatement(null)):(pt.type===_e.Identifier&&(t=ke(),e="$"+t.name,Object.prototype.hasOwnProperty.call(yt.labelSet,e)||K({},at.UnknownLabel,t.name)),J(),null!==t||yt.inIteration||yt.inSwitch||K({},at.IllegalBreak),ft.createBreakStatement(t))}function Fe(){var e=null;return q("return"),yt.inFunctionBody||V({},at.IllegalReturn),32===ct.charCodeAt(lt)&&c(ct.charCodeAt(lt+1))?(e=Se(),J(),ft.createReturnStatement(e)):G()?ft.createReturnStatement(null):(z(";")||z("}")||pt.type===_e.EOF||(e=Se()),J(),ft.createReturnStatement(e))}function Te(){var e,t;return ut&&(h(),V({},at.StrictModeWith)),q("with"),H("("),e=Se(),H(")"),t=Ve(),ft.createWithStatement(e,t)}function De(){var e,t,n,r=[];for(n=pt,$("default")?(D(),e=null):(q("case"),e=Se()),H(":");dt>lt&&!(z("}")||$("default")||$("case"));)t=Ve(),r.push(t);return ft.markEnd(ft.createSwitchCase(e,r),n)}function Be(){var e,t,n,r,a;if(q("switch"),H("("),e=Se(),H(")"),H("{"),t=[],z("}"))return D(),ft.createSwitchStatement(e,t);for(r=yt.inSwitch,yt.inSwitch=!0,a=!1;dt>lt&&!z("}");)n=De(),null===n.test&&(a&&K({},at.MultipleDefaultsInSwitch),a=!0),t.push(n);return yt.inSwitch=r,H("}"),ft.createSwitchStatement(e,t)}function We(){var e;return q("throw"),G()&&K({},at.NewlineAfterThrow),e=Se(),J(),ft.createThrowStatement(e)}function je(){var e,t,n;return n=pt,q("catch"),H("("),z(")")&&M(pt),e=ke(),ut&&m(e.name)&&V({},at.StrictCatchVariable),H(")"),t=ve(),ft.markEnd(ft.createCatchClause(e,t),n)}function Ge(){var e,t=[],n=null;return q("try"),e=ve(),$("catch")&&t.push(je()),$("finally")&&(D(),n=ve()),0!==t.length||n||K({},at.NoCatchOrFinally),ft.createTryStatement(e,[],t,n)}function Ke(){return q("debugger"),J(),ft.createDebuggerStatement()}function Ve(){var e,t,n,r,a=pt.type;if(a===_e.EOF&&M(pt),a===_e.Punctuator&&"{"===pt.value)return ve();if(r=pt,a===_e.Punctuator)switch(pt.value){case";":return ft.markEnd(we(),r);case"(":return ft.markEnd(Ie(),r)}if(a===_e.Keyword)switch(pt.value){case"break":return ft.markEnd(Re(),r);case"continue":return ft.markEnd(Ue(),r);case"debugger":return ft.markEnd(Ke(),r);case"do":return ft.markEnd(Ae(),r);case"for":return ft.markEnd(Oe(),r);case"function":return ft.markEnd(qe(),r);case"if":return ft.markEnd(Le(),r);case"return":return ft.markEnd(Fe(),r);case"switch":return ft.markEnd(Be(),r);case"throw":return ft.markEnd(We(),r);case"try":return ft.markEnd(Ge(),r);case"var":return ft.markEnd(xe(),r);case"while":return ft.markEnd(Pe(),r);case"with":return ft.markEnd(Te(),r)}return e=Se(),e.type===nt.Identifier&&z(":")?(D(),n="$"+e.name,Object.prototype.hasOwnProperty.call(yt.labelSet,n)&&K({},at.Redeclaration,"Label",e.name),yt.labelSet[n]=!0,t=Ve(),delete yt.labelSet[n],ft.markEnd(ft.createLabeledStatement(e,t),r)):(J(),ft.markEnd(ft.createExpressionStatement(e),r))}function Me(){var e,t,n,r,a,i,o,c,u,l=[];for(u=pt,H("{");dt>lt&&pt.type===_e.StringLiteral&&(t=pt,e=$e(),l.push(e),e.expression.type===nt.Literal);)n=ct.slice(t.start+1,t.end-1),"use strict"===n?(ut=!0,r&&V(r,at.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(a=yt.labelSet,i=yt.inIteration,o=yt.inSwitch,c=yt.inFunctionBody,yt.labelSet={},yt.inIteration=!1,yt.inSwitch=!1,yt.inFunctionBody=!0;dt>lt&&!z("}")&&(e=$e(),"undefined"!=typeof e);)l.push(e);return H("}"),yt.labelSet=a,yt.inIteration=i,yt.inSwitch=o,yt.inFunctionBody=c,ft.markEnd(ft.createBlockStatement(l),u)}function He(e){var t,n,r,a,i,o,c=[];if(H("("),!z(")"))for(a={};dt>lt&&(n=pt,t=ke(),i="$"+n.value,ut?(m(n.value)&&(r=n,o=at.StrictParamName),Object.prototype.hasOwnProperty.call(a,i)&&(r=n,o=at.StrictParamDupe)):e||(m(n.value)?(e=n,o=at.StrictParamName):s(n.value)?(e=n,o=at.StrictReservedWord):Object.prototype.hasOwnProperty.call(a,i)&&(e=n,o=at.StrictParamDupe)),c.push(t),a[i]=!0,!z(")"));)H(",");return H(")"),{params:c,stricted:r,firstRestricted:e,message:o}}function qe(){var e,t,n,r,a,i,o,c,u,l=[];return u=pt,q("function"),n=pt,e=ke(),ut?m(n.value)&&V(n,at.StrictFunctionName):m(n.value)?(i=n,o=at.StrictFunctionName):s(n.value)&&(i=n,o=at.StrictReservedWord),a=He(i),l=a.params,r=a.stricted,i=a.firstRestricted,a.message&&(o=a.message),c=ut,t=Me(),ut&&i&&K(i,o),ut&&r&&V(r,o),ut=c,ft.markEnd(ft.createFunctionDeclaration(e,l,[],t),u)}function ze(){var e,t,n,r,a,i,o,c,u=null,l=[];return c=pt,q("function"),z("(")||(e=pt,u=ke(),ut?m(e.value)&&V(e,at.StrictFunctionName):m(e.value)?(n=e,r=at.StrictFunctionName):s(e.value)&&(n=e,r=at.StrictReservedWord)),a=He(n),l=a.params,t=a.stricted,n=a.firstRestricted,a.message&&(r=a.message),o=ut,i=Me(),ut&&n&&K(n,r),ut&&t&&V(t,r),ut=o,ft.markEnd(ft.createFunctionExpression(u,l,[],i),c)}function $e(){if(pt.type===_e.Keyword)switch(pt.value){case"const":case"let":return Ce(pt.value);case"function":return qe();default:return Ve()}return pt.type!==_e.EOF?Ve():void 0}function Xe(){for(var e,t,n,r,a=[];dt>lt&&(t=pt,t.type===_e.StringLiteral)&&(e=$e(),a.push(e),e.expression.type===nt.Literal);)n=ct.slice(t.start+1,t.end-1),"use strict"===n?(ut=!0,r&&V(r,at.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;dt>lt&&(e=$e(),"undefined"!=typeof e);)a.push(e);return a}function Je(){var e,t;return h(),B(),t=pt,ut=!1,e=Xe(),ft.markEnd(ft.createProgram(e),t)}function Qe(){var e,t,n,r=[];for(e=0;e<ht.tokens.length;++e)t=ht.tokens[e],n={type:t.type,value:t.value},ht.range&&(n.range=t.range),ht.loc&&(n.loc=t.loc),r.push(n);ht.tokens=r}function Ye(e,t){var n,r,a;n=String,"string"==typeof e||e instanceof String||(e=n(e)),ft=ot,ct=e,lt=0,st=ct.length>0?1:0,mt=0,dt=ct.length,pt=null,yt={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},ht={},t=t||{},t.tokens=!0,ht.tokens=[],ht.tokenize=!0,ht.openParenToken=-1,ht.openCurlyToken=-1,ht.range="boolean"==typeof t.range&&t.range,ht.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(ht.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(ht.errors=[]);try{if(B(),pt.type===_e.EOF)return ht.tokens;for(r=D();pt.type!==_e.EOF;)try{r=D()}catch(i){if(r=pt,ht.errors){ht.errors.push(i);break}throw i}Qe(),a=ht.tokens,"undefined"!=typeof ht.comments&&(a.comments=ht.comments),"undefined"!=typeof ht.errors&&(a.errors=ht.errors)}catch(o){throw o}finally{ht={}}return a}function Ze(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),ft=ot,ct=e,lt=0,st=ct.length>0?1:0,mt=0,dt=ct.length,pt=null,yt={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},ht={},"undefined"!=typeof t&&(ht.range="boolean"==typeof t.range&&t.range,ht.loc="boolean"==typeof t.loc&&t.loc,ht.attachComment="boolean"==typeof t.attachComment&&t.attachComment,ht.loc&&null!==t.source&&void 0!==t.source&&(ht.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(ht.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(ht.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(ht.errors=[]),ht.attachComment&&(ht.range=!0,ht.comments=[],ht.bottomRightStack=[],ht.trailingComments=[],ht.leadingComments=[]));try{n=Je(),"undefined"!=typeof ht.comments&&(n.comments=ht.comments),"undefined"!=typeof ht.tokens&&(Qe(),n.tokens=ht.tokens),"undefined"!=typeof ht.errors&&(n.errors=ht.errors)}catch(a){throw a}finally{ht={}}return n}var _e,et,tt,nt,rt,at,it,ot,ct,ut,lt,st,mt,dt,ft,pt,yt,ht;_e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},et={},et[_e.BooleanLiteral]="Boolean",et[_e.EOF]="<end>",et[_e.Identifier]="Identifier",et[_e.Keyword]="Keyword",et[_e.NullLiteral]="Null",et[_e.NumericLiteral]="Numeric",et[_e.Punctuator]="Punctuator",et[_e.StringLiteral]="String",et[_e.RegularExpression]="RegularExpression",tt=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],nt={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},rt={Data:1,Get:2,Set:4},at={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",
StrictReservedWord:"Use of future reserved word in strict mode"},it={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},ot={name:"SyntaxTree",processComment:function(e){var t,n;if(!(e.type===nt.Program&&e.body.length>0)){for(ht.trailingComments.length>0?ht.trailingComments[0].range[0]>=e.range[1]?(n=ht.trailingComments,ht.trailingComments=[]):ht.trailingComments.length=0:ht.bottomRightStack.length>0&&ht.bottomRightStack[ht.bottomRightStack.length-1].trailingComments&&ht.bottomRightStack[ht.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(n=ht.bottomRightStack[ht.bottomRightStack.length-1].trailingComments,delete ht.bottomRightStack[ht.bottomRightStack.length-1].trailingComments);ht.bottomRightStack.length>0&&ht.bottomRightStack[ht.bottomRightStack.length-1].range[0]>=e.range[0];)t=ht.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):ht.leadingComments.length>0&&ht.leadingComments[ht.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=ht.leadingComments,ht.leadingComments=[]),n&&(e.trailingComments=n),ht.bottomRightStack.push(e)}},markEnd:function(e,t){return ht.range&&(e.range=[t.start,lt]),ht.loc&&(e.loc=new j(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),st,lt-mt),this.postProcess(e)),ht.attachComment&&this.processComment(e),e},postProcess:function(e){return ht.source&&(e.loc.source=ht.source),e},createArrayExpression:function(e){return{type:nt.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:nt.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){var r="||"===e||"&&"===e?nt.LogicalExpression:nt.BinaryExpression;return{type:r,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:nt.BlockStatement,body:e}},createBreakStatement:function(e){return{type:nt.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:nt.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:nt.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:nt.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:nt.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:nt.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:nt.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:nt.EmptyStatement}},createExpressionStatement:function(e){return{type:nt.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,r){return{type:nt.ForStatement,init:e,test:t,update:n,body:r}},createForInStatement:function(e,t,n){return{type:nt.ForInStatement,left:e,right:t,body:n,each:!1}},createFunctionDeclaration:function(e,t,n,r){return{type:nt.FunctionDeclaration,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,n,r){return{type:nt.FunctionExpression,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:nt.Identifier,name:e}},createIfStatement:function(e,t,n){return{type:nt.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:nt.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:nt.Literal,value:e.value,raw:ct.slice(e.start,e.end)}},createMemberExpression:function(e,t,n){return{type:nt.MemberExpression,computed:"["===e,object:t,property:n}},createNewExpression:function(e,t){return{type:nt.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:nt.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:nt.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:nt.Program,body:e}},createProperty:function(e,t,n){return{type:nt.Property,key:t,value:n,kind:e}},createReturnStatement:function(e){return{type:nt.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:nt.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:nt.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:nt.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:nt.ThisExpression}},createThrowStatement:function(e){return{type:nt.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,r){return{type:nt.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:nt.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:nt.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:nt.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:nt.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:nt.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:nt.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=Ye,e.parse=Ze,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in nt)nt.hasOwnProperty(e)&&(t[e]=nt[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()});
},{}],14:[function(require,module,exports){
arguments[4][9][0].apply(exports,arguments)
},{"dup":9}],15:[function(require,module,exports){
function EventLite(){return this instanceof EventLite?void 0:new EventLite}!function(t){function e(t){for(var e in l)t[e]=l[e];return t}function n(t,e){return u(this,t).push(e),this}function r(t,e){function n(){i.call(r,t,n),e.apply(this,arguments)}var r=this;return u(r,t).push(n),r}function i(t,e){function n(t){return t!==e}var r,f=this;if(t){if(e){if(r=u(f,t,!0)){if(r=r.filter(n),!r.length)return i.call(f,t);f[o][t]=r}}else if(r=f[o],r&&(delete r[t],!Object.keys(r).length))return i.call(f)}else delete f[o];return f}function f(t,e){function n(t){t.call(f)}function r(t){t.call(f,e)}function i(t){t.apply(f,c)}var f=this,o=u(f,t,!0);if(!o)return!1;var l=arguments.length;if(1===l)o.forEach(n);else if(2===l)o.forEach(r);else{var c=Array.prototype.slice.call(arguments,1);o.forEach(i)}return!!o.length}function u(t,e,n){if(!n||t[o]){var r=t[o]||(t[o]={});return r[e]||(r[e]=[])}}"undefined"!=typeof module&&(module.exports=t);var o="listeners",l={on:n,once:r,off:i,emit:f};e(t.prototype),t.mixin=e}(EventLite);
},{}],16:[function(require,module,exports){
exports.encode=require("./encode").encode,exports.decode=require("./decode").decode,exports.Encoder=require("./encoder").Encoder,exports.Decoder=require("./decoder").Decoder;
},{"./decode":20,"./decoder":21,"./encode":23,"./encoder":24}],17:[function(require,module,exports){
function writeString(r,t){for(var e=this,n=t||0,i=r.length,o=0;i>o;o++){var a=r.charCodeAt(o);128>a?e[n++]=a:2048>a?(e[n++]=192|a>>6,e[n++]=128|63&a):(e[n++]=224|a>>12,e[n++]=128|a>>6&63,e[n++]=128|63&a)}return n-t}function readString(r,t){var e=this,n=r-0||0;t||(t=e.length);var i=t-r;i>MAXBUFLEN&&(i=MAXBUFLEN);for(var o=[];t>n;){for(var a=new Array(i),h=0;i>h&&t>n;){var f=e[n++];f=128>f?f:224>f?(63&f)<<6|63&e[n++]:(63&f)<<12|(63&e[n++])<<6|63&e[n++],a[h++]=f}i>h&&(a=a.slice(0,h)),o.push(String.fromCharCode.apply("",a))}return o.length>1?o.join(""):o.length?o.shift():""}function byteLength(r){var t=0;return Array.prototype.forEach.call(r,function(r){var e=r.charCodeAt(0);t+=128>e?1:2048>e?2:3}),t}function copy(r,t,e,n){var i;e||(e=0),n||0===n||(n=this.length),t||(t=0);var o=n-e;if(r===this&&t>e&&n>t)for(i=o-1;i>=0;i--)r[i+t]=this[i+e];else for(i=0;o>i;i++)r[i+t]=this[i+e];return o}function writeUint64BE(r,t){for(var e=7;e>=0;e--)this[t+e]=255&r,r/=256}function writeInt64BE(r,t){if(r>0)return writeUint64BE.call(this,r,t);r++;for(var e=7;e>=0;e--)this[t+e]=255&-r^255,r/=256}var MAXBUFLEN=8192;exports.writeString=writeString,exports.readString=readString,exports.byteLength=byteLength,exports.copy=copy,exports.writeUint64BE=writeUint64BE,exports.writeInt64BE=writeInt64BE;
},{}],18:[function(require,module,exports){
exports.BUFFER_SHORTAGE=new Error("BUFFER_SHORTAGE");
},{}],19:[function(require,module,exports){
(function (Buffer){
function DecodeBuffer(e){return this instanceof DecodeBuffer?void(this.options=e||DEFAULT_OPTIONS):new DecodeBuffer(e)}exports.DecodeBuffer=DecodeBuffer;var DEFAULT_OPTIONS={};DecodeBuffer.prototype.push=Array.prototype.push,DecodeBuffer.prototype.read=Array.prototype.shift,DecodeBuffer.prototype.append=function(e){var f=this.offset?this.buffer.slice(this.offset):this.buffer;this.buffer=f?Buffer.concat([f,e]):e,this.offset=0};
}).call(this,require("buffer").Buffer)
},{"buffer":1}],20:[function(require,module,exports){
function decode(e,d){var r=new DecodeBuffer(d);return r.append(e),decode(r)}exports.decode=decode;var DecodeBuffer=require("./decode-buffer").DecodeBuffer,decode=require("./read-core").decode;
},{"./decode-buffer":19,"./read-core":28}],21:[function(require,module,exports){
function Decoder(e){return this instanceof Decoder?void DecodeBuffer.call(this,e):new Decoder(e)}exports.Decoder=Decoder;var EventLite=require("event-lite"),DecodeBuffer=require("./decode-buffer").DecodeBuffer,decodeAsync=require("./read-core").decodeAsync;Decoder.prototype=new DecodeBuffer,EventLite.mixin(Decoder.prototype),Decoder.prototype.decode=function(e){e&&this.append(e),decodeAsync(this)},Decoder.prototype.push=function(e){this.emit("data",e)},Decoder.prototype.end=function(e){this.decode(e),this.emit("end")};
},{"./decode-buffer":19,"./read-core":28,"event-lite":15}],22:[function(require,module,exports){
(function (Buffer){
function EncodeBuffer(t){return this instanceof EncodeBuffer?void(this.options=t||DEFAULT_OPTIONS):new EncodeBuffer(t)}exports.EncodeBuffer=EncodeBuffer;var MIN_BUFFER_SIZE=2048,MAX_BUFFER_SIZE=65536,DEFAULT_OPTIONS={};EncodeBuffer.prototype.push=function(t){var f=this.buffers||(this.buffers=[]);f.push(t)},EncodeBuffer.prototype.read=function(){this.flush();var t=this.buffers;if(t){var f=t.length>1?Buffer.concat(t):t[0];return t.length=0,f}},EncodeBuffer.prototype.flush=function(){this.start<this.offset&&(this.push(this.buffer.slice(this.start,this.offset)),this.start=this.offset)},EncodeBuffer.prototype.reserve=function(t){if(!this.buffer)return this.alloc(t);var f=this.buffer.length;this.offset+t<f||(this.offset&&this.flush(),this.alloc(Math.max(t,Math.min(2*f,MAX_BUFFER_SIZE))))},EncodeBuffer.prototype.alloc=function(t){this.buffer=new Buffer(t>MIN_BUFFER_SIZE?t:MIN_BUFFER_SIZE),this.start=0,this.offset=0},EncodeBuffer.prototype.send=function(t){var f=this.offset+t.length;this.buffer&&f<this.buffer.length?(t.copy(this.buffer,this.offset),this.offset=f):(this.flush(),this.push(t))};
}).call(this,require("buffer").Buffer)
},{"buffer":1}],23:[function(require,module,exports){
function encode(e,r){var n=new EncodeBuffer(r);return encode(n,e),n.read()}exports.encode=encode;var encode=require("./write-core").encode,EncodeBuffer=require("./encode-buffer").EncodeBuffer;
},{"./encode-buffer":22,"./write-core":31}],24:[function(require,module,exports){
function Encoder(e){return this instanceof Encoder?void EncodeBuffer.call(this,e):new Encoder(e)}exports.Encoder=Encoder;var EventLite=require("event-lite"),encode=require("./write-core").encode,EncodeBuffer=require("./encode-buffer").EncodeBuffer;Encoder.prototype=new EncodeBuffer,EventLite.mixin(Encoder.prototype),Encoder.prototype.encode=function(e){encode(this,e),this.emit("data",this.read())},Encoder.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")};
},{"./encode-buffer":22,"./write-core":31,"event-lite":15}],25:[function(require,module,exports){
function ExtBuffer(f,t){return this instanceof ExtBuffer?(this.buffer=f,void(this.type=t)):new ExtBuffer(f,t)}exports.ExtBuffer=ExtBuffer;
},{}],26:[function(require,module,exports){
(function (Buffer){
function init(){preset.addExtPacker(14,Error,join(packError,encode)),preset.addExtPacker(1,EvalError,join(packError,encode)),preset.addExtPacker(2,RangeError,join(packError,encode)),preset.addExtPacker(3,ReferenceError,join(packError,encode)),preset.addExtPacker(4,SyntaxError,join(packError,encode)),preset.addExtPacker(5,TypeError,join(packError,encode)),preset.addExtPacker(6,URIError,join(packError,encode)),preset.addExtUnpacker(14,join(decode,unpackError(Error))),preset.addExtUnpacker(1,join(decode,unpackError(EvalError))),preset.addExtUnpacker(2,join(decode,unpackError(RangeError))),preset.addExtUnpacker(3,join(decode,unpackError(ReferenceError))),preset.addExtUnpacker(4,join(decode,unpackError(SyntaxError))),preset.addExtUnpacker(5,join(decode,unpackError(TypeError))),preset.addExtUnpacker(6,join(decode,unpackError(URIError))),preset.addExtPacker(10,RegExp,join(packRegExp,encode)),preset.addExtPacker(11,Boolean,join(packValueOf,encode)),preset.addExtPacker(12,String,join(packValueOf,encode)),preset.addExtPacker(13,Date,join(Number,encode)),preset.addExtPacker(15,Number,join(packValueOf,encode)),preset.addExtUnpacker(10,join(decode,unpackRegExp)),preset.addExtUnpacker(11,join(decode,unpackClass(Boolean))),preset.addExtUnpacker(12,join(decode,unpackClass(String))),preset.addExtUnpacker(13,join(decode,unpackClass(Date))),preset.addExtUnpacker(15,join(decode,unpackClass(Number))),"undefined"!=typeof Uint8Array&&(preset.addExtPacker(17,Int8Array,packBuffer),preset.addExtPacker(18,Uint8Array,packBuffer),preset.addExtPacker(19,Int16Array,packTypedArray),preset.addExtPacker(20,Uint16Array,packTypedArray),preset.addExtPacker(21,Int32Array,packTypedArray),preset.addExtPacker(22,Uint32Array,packTypedArray),preset.addExtPacker(23,Float32Array,packTypedArray),preset.addExtUnpacker(17,unpackClass(Int8Array)),preset.addExtUnpacker(18,unpackClass(Uint8Array)),preset.addExtUnpacker(19,join(unpackArrayBuffer,unpackClass(Int16Array))),preset.addExtUnpacker(20,join(unpackArrayBuffer,unpackClass(Uint16Array))),preset.addExtUnpacker(21,join(unpackArrayBuffer,unpackClass(Int32Array))),preset.addExtUnpacker(22,join(unpackArrayBuffer,unpackClass(Uint32Array))),preset.addExtUnpacker(23,join(unpackArrayBuffer,unpackClass(Float32Array))),"undefined"!=typeof Float64Array&&(preset.addExtPacker(24,Float64Array,packTypedArray),preset.addExtUnpacker(24,join(unpackArrayBuffer,unpackClass(Float64Array)))),"undefined"!=typeof Uint8ClampedArray&&(preset.addExtPacker(25,Uint8ClampedArray,packBuffer),preset.addExtUnpacker(25,unpackClass(Uint8ClampedArray))),preset.addExtPacker(26,ArrayBuffer,packArrayBuffer),preset.addExtPacker(29,DataView,packTypedArray),preset.addExtUnpacker(26,unpackArrayBuffer),preset.addExtUnpacker(29,join(unpackArrayBuffer,unpackClass(DataView))))}function join(r){function e(r,e){return e(r)}return r=Array.prototype.slice.call(arguments),function(a){return r.reduce(e,a)}}function packBuffer(r){return new Buffer(r)}function packValueOf(r){return r.valueOf()}function packRegExp(r){r=RegExp.prototype.toString.call(r).split("/"),r.shift();var e=[r.pop()];return e.unshift(r.join("/")),e}function unpackRegExp(r){return RegExp.apply(null,r)}function packError(r){var e={};for(var a in ERROR_COLUMNS)e[a]=r[a];return e}function unpackError(r){return function(e){var a=new r;for(var n in ERROR_COLUMNS)a[n]=e[n];return a}}function unpackClass(r){return function(e){return new r(e)}}function packTypedArray(r){return new Buffer(new Uint8Array(r.buffer))}function packArrayBuffer(r){return new Buffer(new Uint8Array(r))}function unpackArrayBuffer(r){return new Uint8Array(r).buffer}var Ext=require("./ext").Ext,preset=exports.preset=new Ext,encode=require("./encode").encode,decode=require("./decode").decode,ERROR_COLUMNS={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};init();
}).call(this,require("buffer").Buffer)
},{"./decode":20,"./encode":23,"./ext":27,"buffer":1}],27:[function(require,module,exports){
function Ext(){return this instanceof Ext?(this.extPackers={},void(this.extUnpackers=[])):new Ext}exports.Ext=Ext;var ExtBuffer=require("./ext-buffer").ExtBuffer;Ext.prototype.addExtPacker=function(t,e,r){function n(e){var n=r(e);return new ExtBuffer(n,t)}var i=e.name;if(i&&"Object"!==i)this.extPackers[i]=n;else{var x=this.extEncoderList||(this.extEncoderList=[]);x.unshift([e,n])}},Ext.prototype.addExtUnpacker=function(t,e){this.extUnpackers[t]=e},Ext.prototype.getExtPacker=function(t){var e=t.constructor,r=e&&e.name&&this.extPackers[e.name];if(r)return r;var n=this.extEncoderList;if(n)for(var i=n.length,x=0;i>x;x++){var a=n[x];if(e===a[0])return a[1]}},Ext.prototype.getExtUnpacker=function(t){function e(e){return new ExtBuffer(e,t)}return this.extUnpackers[t]||e};
},{"./ext-buffer":25}],28:[function(require,module,exports){
function decode(e){var o=uint8(e),r=token[o];if(!r)throw new Error("Invalid type: "+(o?"0x"+o.toString(16):o));return r(e)}function decodeAsync(e){for(;e.offset<e.buffer.length;){var o,r=e.offset;try{o=decode(e)}catch(t){if(t!==BUFFER_SHORTAGE)throw t;e.offset=r;break}e.push(o)}}exports.decode=decode,exports.decodeAsync=decodeAsync;var uint8=require("./read-format").format.uint8,token=require("./read-token").token,BUFFER_SHORTAGE=require("./common").BUFFER_SHORTAGE;
},{"./common":18,"./read-format":29,"./read-token":30}],29:[function(require,module,exports){
(function (Buffer){
function map(r,e){var t,f={},n=new Array(e),o=new Array(e);for(t=0;e>t;t++)n[t]=decode(r),o[t]=decode(r);for(t=0;e>t;t++)f[n[t]]=o[t];return f}function array(r,e){for(var t=new Array(e),f=0;e>f;f++)t[f]=decode(r);return t}function str(r,e){var t=r.offset,f=r.offset=t+e;if(f>r.buffer.length)throw BUFFER_SHORTAGE;return IS_BUFFER_SHIM?BufferLite.readString.call(r.buffer,t,f):r.buffer.toString("utf-8",t,f)}function bin(r,e){var t=r.offset,f=r.offset=t+e;if(f>r.buffer.length)throw BUFFER_SHORTAGE;return r.buffer.slice(t,f)}function ext(r,e){var t=r.offset,f=r.offset=t+e+1;if(f>r.buffer.length)throw BUFFER_SHORTAGE;var n=r.buffer[t],o=codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));var a=r.buffer.slice(t+1,f);return o(a)}function uint8(r){var e=r.buffer;if(r.offset>=e.length)throw BUFFER_SHORTAGE;return e[r.offset++]}function uint16(r){var e=r.buffer;if(r.offset+2>e.length)throw BUFFER_SHORTAGE;return e[r.offset++]<<8|e[r.offset++]}function read(r,e){return function(t){var f=t.offset,n=t.offset=f+r;if(n>t.buffer.length)throw BUFFER_SHORTAGE;return e.call(t.buffer,f,NO_ASSERT)}}function readUInt64BE(r,e){var t=this.readUInt32BE(r,e),f=this.readUInt32BE(r+4,e);return t?4294967296*t+f:f}function readInt64BE(r,e){var t=this.readInt32BE(r,e),f=this.readUInt32BE(r+4,e);return t?4294967296*t+f:f}exports.format={map:map,array:array,str:str,bin:bin,ext:ext,uint8:uint8,uint16:uint16,uint32:read(4,Buffer.prototype.readUInt32BE),uint64:read(8,readUInt64BE),int8:read(1,Buffer.prototype.readInt8),int16:read(2,Buffer.prototype.readInt16BE),int32:read(4,Buffer.prototype.readInt32BE),int64:read(8,readInt64BE),float32:read(4,Buffer.prototype.readFloatBE),float64:read(8,Buffer.prototype.readDoubleBE)};var BufferLite=require("./buffer-lite"),decode=require("./read-core").decode,codec=require("./ext-preset").preset,BUFFER_SHORTAGE=require("./common").BUFFER_SHORTAGE,IS_BUFFER_SHIM="TYPED_ARRAY_SUPPORT"in Buffer,NO_ASSERT=!0;
}).call(this,require("buffer").Buffer)
},{"./buffer-lite":17,"./common":18,"./ext-preset":26,"./read-core":28,"buffer":1}],30:[function(require,module,exports){
function init(){var t;for(t=0;127>=t;t++)token[t]=constant(t);for(t=128;143>=t;t++)token[t]=fix(t-128,format.map);for(t=144;159>=t;t++)token[t]=fix(t-144,format.array);for(t=160;191>=t;t++)token[t]=fix(t-160,format.str);for(token[192]=constant(null),token[193]=null,token[194]=constant(!1),token[195]=constant(!0),token[196]=flex(format.uint8,format.bin),token[197]=flex(format.uint16,format.bin),token[198]=flex(format.uint32,format.bin),token[199]=flex(format.uint8,format.ext),token[200]=flex(format.uint16,format.ext),token[201]=flex(format.uint32,format.ext),token[202]=format.float32,token[203]=format.float64,token[204]=format.uint8,token[205]=format.uint16,token[206]=format.uint32,token[207]=format.uint64,token[208]=format.int8,token[209]=format.int16,token[210]=format.int32,token[211]=format.int64,token[212]=fix(1,format.ext),token[213]=fix(2,format.ext),token[214]=fix(4,format.ext),token[215]=fix(8,format.ext),token[216]=fix(16,format.ext),token[217]=flex(format.uint8,format.str),token[218]=flex(format.uint16,format.str),token[219]=flex(format.uint32,format.str),token[220]=flex(format.uint16,format.array),token[221]=flex(format.uint32,format.array),token[222]=flex(format.uint16,format.map),token[223]=flex(format.uint32,format.map),t=224;255>=t;t++)token[t]=constant(t-256)}function constant(t){return function(){return t}}function flex(t,o){return function(n){var f=t(n);return o(n,f)}}function fix(t,o){return function(n){return o(n,t)}}var token=exports.token=new Array(256),format=require("./read-format").format;init();
},{"./read-format":29}],31:[function(require,module,exports){
function encode(e,t){var r=type[typeof t];if(!r)throw new Error('Unsupported type "'+typeof t+'": '+t);r(e,t)}exports.encode=encode;var type=require("./write-type").type;
},{"./write-type":33}],32:[function(require,module,exports){
(function (Buffer){
function init(){for(var t=0;255>=t;t++)token[t]=uint8[t];NO_TYPED_ARRAY?init_compatible():init_optimized()}function init_optimized(){token[196]=write1(196),token[197]=write2(197),token[198]=write4(198),token[199]=write1(199),token[200]=write2(200),token[201]=write4(201),token[202]=writeN(202,4,Buffer.prototype.writeFloatBE),token[203]=writeN(203,8,Buffer.prototype.writeDoubleBE),token[204]=write1(204),token[205]=write2(205),token[206]=write4(206),token[207]=writeN(207,8,BufferLite.writeUint64BE),token[208]=write1(208),token[209]=write2(209),token[210]=write4(210),token[211]=writeN(211,8,BufferLite.writeUint64BE),token[217]=write1(217),token[218]=write2(218),token[219]=write4(219),token[220]=write2(220),token[221]=write4(221),token[222]=write2(222),token[223]=write4(223)}function init_compatible(){token[196]=writeN(196,1,Buffer.prototype.writeUInt8),token[197]=writeN(197,2,Buffer.prototype.writeUInt16BE),token[198]=writeN(198,4,Buffer.prototype.writeUInt32BE),token[199]=writeN(199,1,Buffer.prototype.writeUInt8),token[200]=writeN(200,2,Buffer.prototype.writeUInt16BE),token[201]=writeN(201,4,Buffer.prototype.writeUInt32BE),token[202]=writeN(202,4,Buffer.prototype.writeFloatBE),token[203]=writeN(203,8,Buffer.prototype.writeDoubleBE),token[204]=writeN(204,1,Buffer.prototype.writeUInt8),token[205]=writeN(205,2,Buffer.prototype.writeUInt16BE),token[206]=writeN(206,4,Buffer.prototype.writeUInt32BE),token[207]=writeN(207,8,BufferLite.writeUint64BE),token[208]=writeN(208,1,Buffer.prototype.writeInt8),token[209]=writeN(209,2,Buffer.prototype.writeInt16BE),token[210]=writeN(210,4,Buffer.prototype.writeInt32BE),token[211]=writeN(211,8,BufferLite.writeUint64BE),token[217]=writeN(217,1,Buffer.prototype.writeUInt8),token[218]=writeN(218,2,Buffer.prototype.writeUInt16BE),token[219]=writeN(219,4,Buffer.prototype.writeUInt32BE),token[220]=writeN(220,2,Buffer.prototype.writeUInt16BE),token[221]=writeN(221,4,Buffer.prototype.writeUInt32BE),token[222]=writeN(222,2,Buffer.prototype.writeUInt16BE),token[223]=writeN(223,4,Buffer.prototype.writeUInt32BE)}function write1(t){return function(e,r){e.reserve(2);var o=e.buffer,i=e.offset;o[i++]=t,o[i++]=r,e.offset=i}}function write2(t){return function(e,r){e.reserve(3);var o=e.buffer,i=e.offset;o[i++]=t,o[i++]=r>>>8,o[i++]=r,e.offset=i}}function write4(t){return function(e,r){e.reserve(5);var o=e.buffer,i=e.offset;o[i++]=t,o[i++]=r>>>24,o[i++]=r>>>16,o[i++]=r>>>8,o[i++]=r,e.offset=i}}function writeN(t,e,r){return function(o,i){o.reserve(e+1),o.buffer[o.offset++]=t,r.call(o.buffer,i,o.offset,NO_ASSERT),o.offset+=e}}var token=exports.token=new Array(256),BufferLite=require("./buffer-lite"),uint8=require("./write-uint8").uint8,NO_ASSERT=!0,IS_BUFFER_SHIM="TYPED_ARRAY_SUPPORT"in Buffer,NO_TYPED_ARRAY=IS_BUFFER_SHIM&&!Buffer.TYPED_ARRAY_SUPPORT;init();
}).call(this,require("buffer").Buffer)
},{"./buffer-lite":17,"./write-uint8":34,"buffer":1}],33:[function(require,module,exports){
(function (Buffer){
function bool(e,r){var t=r?195:194;token[t](e,r)}function number(e,r){var t,n=0|r;return r!==n?(t=203,void token[t](e,r)):(t=n>=-32&&127>=n?255&n:n>=0?255>=n?204:65535>=n?205:206:n>=-128?208:n>=-32768?209:210,void token[t](e,n))}function string(e,r){var t=r.length,n=5+3*t;e.reserve(n);var f=32>t?1:255>=t?2:65535>=t?3:5,o=e.offset+f;t=BufferLite.writeString.call(e.buffer,r,o);var i=32>t?1:255>=t?2:65535>=t?3:5;if(f!==i){var u=e.offset+i,a=o+t;IS_BUFFER_SHIM?BufferLite.copy.call(e.buffer,e.buffer,u,o,a):e.buffer.copy(e.buffer,u,o,a)}var c=1===i?160+t:3>=i?215+i:219;token[c](e,t),e.offset+=t}function object(e,r){if(IS_ARRAY(r))return array(e,r);if(null===r)return nil(e,r);var t=codec.getExtPacker(r);return t&&(r=t(r)),r instanceof ExtBuffer?ext(e,r):Buffer.isBuffer(r)?bin(e,r):void map(e,r)}function nil(e,r){var t=192;token[t](e,r)}function array(e,r){var t=r.length,n=16>t?144+t:65535>=t?220:221;token[n](e,t);for(var f=0;t>f;f++)encode(e,r[f])}function bin(e,r){var t=r.length,n=255>t?196:65535>=t?197:198;token[n](e,t),e.send(r)}function ext(e,r){var t=r.buffer,n=t.length,f=extmap[n]||(255>n?199:65535>=n?200:201);token[f](e,n),uint8[r.type](e),e.send(t)}function map(e,r){var t=Object.keys(r),n=t.length,f=16>n?128+n:65535>=n?222:223;token[f](e,n),t.forEach(function(t){encode(e,t),encode(e,r[t])})}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}exports.type={"boolean":bool,"function":nil,number:number,object:object,string:string,symbol:nil,undefined:nil};var BufferLite=require("./buffer-lite"),token=require("./write-token").token,encode=require("./write-core").encode,uint8=require("./write-uint8").uint8,codec=require("./ext-preset").preset,ExtBuffer=require("./ext-buffer").ExtBuffer,IS_BUFFER_SHIM="TYPED_ARRAY_SUPPORT"in Buffer,IS_ARRAY=Array.isArray||isArray,extmap=[];extmap[1]=212,extmap[2]=213,extmap[4]=214,extmap[8]=215,extmap[16]=216;
}).call(this,require("buffer").Buffer)
},{"./buffer-lite":17,"./ext-buffer":25,"./ext-preset":26,"./write-core":31,"./write-token":32,"./write-uint8":34,"buffer":1}],34:[function(require,module,exports){
function write0(r){return function(t){t.reserve(1),t.buffer[t.offset++]=r}}for(var constant=exports.uint8=new Array(256),i=0;255>=i;i++)constant[i]=write0(i);
},{}],35:[function(require,module,exports){
"use strict";module.exports.swap=function(t,e){for(var a,s=t.data,r=e.data,o=t.stride[0],f=e.stride[0],d=t.offset,i=e.offset,u=t.shape[0]-1;u>=0;u--,d+=o,i+=f)a=s[d],s[d]=r[i],r[i]=a},module.exports.scal=function(t,e){for(var a=e.data,s=e.stride[0],r=e.offset,o=e.shape[0]-1;o>=0;o--,r+=s)a[r]*=t},module.exports.copy=function(t,e){for(var a=t.data,s=e.data,r=t.stride[0],o=e.stride[0],f=t.offset,d=e.offset,i=t.shape[0]-1;i>=0;i--,f+=r,d+=o)s[d]=a[f]},module.exports.axpy=function(t,e,a){for(var s=e.data,r=a.data,o=e.stride[0],f=a.stride[0],d=e.offset,i=a.offset,u=e.shape[0]-1;u>=0;u--,d+=o,i+=f)r[i]+=t*s[d]},module.exports.dot=function(t,e){var a,s,r=t.data,o=t.stride[0],f=t.offset,d=0;if(t===e)for(a=t.shape[0]-1;a>=0;a--,f+=o)s=r[f],d+=s*s;else{var i=e.data,u=e.stride[0],n=e.offset;for(a=t.shape[0]-1;a>=0;a--,f+=o,n+=u)d+=i[n]*r[f]}return d},module.exports.cpsc=function(t,e,a){for(var s=e.data,r=a.data,o=e.stride[0],f=a.stride[0],d=e.offset,i=a.offset,u=e.shape[0]-1;u>=0;u--,d+=o,i+=f)r[i]=t*s[d]},module.exports.nrm2=function(t){var e,a,s=t.data,r=t.stride[0],o=t.offset,f=0;for(e=t.shape[0]-1;e>=0;e--,o+=r)a=s[o],f+=a*a;return Math.sqrt(f)},module.exports.asum=function(t){var e,a=t.data,s=t.stride[0],r=t.offset,o=0;for(e=t.shape[0]-1;e>=0;e--,r+=s)o+=Math.abs(a[r]);return o},module.exports.iamax=function(t){var e,a,s,r=-(1/0),o=t.data,f=t.stride[0],d=t.offset,i=t.shape[0];for(e=0;i>e;e++,d+=f)a=Math.abs(o[d]),a>r&&(r=a,s=e);return s};
},{}],36:[function(require,module,exports){
"use strict";function fixup(a){if(!a)return EmptyProc;for(var r=0;r<a.args.length;++r){var s=a.args[r];0===r?a.args[r]={name:s,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:a.args[r]={name:s,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function pcompile(a){return compile({args:a.args,pre:fixup(a.pre),body:fixup(a.body),post:fixup(a.proc),funcName:a.funcName})}function makeOp(a){for(var r=[],s=0;s<a.args.length;++s)r.push("a"+s);var i=new Function("P",["return function ",a.funcName,"_ndarrayops(",r.join(","),") {P(",r.join(","),");return a0}"].join(""));return i(pcompile(a))}var compile=require("cwise-compiler"),EmptyProc={body:"",args:[],thisVars:[],localVars:[]},assign_ops={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in assign_ops){var r=assign_ops[a];exports[a]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:a+"eq"}),exports[a+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:a+"seq"})}}();var unary_ops={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in unary_ops){var r=unary_ops[a];exports[a]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:a}),exports[a+"eq"]=makeOp({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var binary_ops={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in binary_ops){var r=binary_ops[a];exports[a]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:a+"eq"}),exports[a+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var math_unary=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<math_unary.length;++a){var r=math_unary[a];exports[r]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),exports[r+"eq"]=makeOp({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var math_comm=["max","min","atan2","pow"];!function(){for(var a=0;a<math_comm.length;++a){var r=math_comm[a];exports[r]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),exports[r+"s"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),exports[r+"eq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),exports[r+"seq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var math_noncomm=["atan2","pow"];!function(){for(var a=0;a<math_noncomm.length;++a){var r=math_noncomm[a];exports[r+"op"]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),exports[r+"ops"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),exports[r+"opeq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),exports[r+"opseq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),exports.any=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),exports.all=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),exports.sum=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),exports.prod=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),exports.norm2squared=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),exports.norm2=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),exports.norminf=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),exports.norm1=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),exports.sup=compile({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.inf=compile({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.argmin=compile({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.argmax=compile({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.random=makeOp({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),exports.assign=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),exports.assigns=makeOp({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),exports.equals=compile({args:["array","array"],pre:EmptyProc,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});
},{"cwise-compiler":6}],37:[function(require,module,exports){
"use strict";function dupe_array(e,r,u){var n=0|e[u];if(0>=n)return[];var t,a=new Array(n);if(u===e.length-1)for(t=0;n>t;++t)a[t]=r;else for(t=0;n>t;++t)a[t]=dupe_array(e,r,u+1);return a}function dupe_number(e,r){var u,n;for(u=new Array(e),n=0;e>n;++n)u[n]=r;return u}function dupe(e,r){switch("undefined"==typeof r&&(r=0),typeof e){case"number":if(e>0)return dupe_number(0|e,r);break;case"object":if("number"==typeof e.length)return dupe_array(e,r,0)}return[]}module.exports=dupe;
},{}],38:[function(require,module,exports){
"use strict";var dup=require("dup"),do_unpack=require("cwise/lib/wrapper")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_1_a,_inline_1_e=_inline_1_arg1_;for(_inline_1_a=0;_inline_1_a<_inline_1_arg2_.length-1;++_inline_1_a)_inline_1_e=_inline_1_e[_inline_1_arg2_[_inline_1_a]];_inline_1_e[_inline_1_arg2_[_inline_1_arg2_.length-1]]=_inline_1_arg0_}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_a","_inline_1_e"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"unpackCwise",blockSize:64});module.exports=function(_){var n=dup(_.shape);return do_unpack(_,n),n};
},{"cwise/lib/wrapper":11,"dup":37}],39:[function(require,module,exports){
function compare1st(t,r){return t[0]-r[0]}function order(){var t,r=this.stride,e=new Array(r.length);for(t=0;t<e.length;++t)e[t]=[Math.abs(r[t]),t];e.sort(compare1st);var n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=e[t][1];return n}function compileConstructor(t,r){var e=["View",r,"d",t].join("");0>r&&(e="View_Nil"+t);var n="generic"===t;if(-1===r){var o="function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+e+"(a){return new "+e+"(a);}",i=new Function(o);return i()}if(0===r){var o="function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+e+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}",i=new Function("TrivialArray",o);return i(CACHED_CONSTRUCTORS[t][0])}var o=["'use strict'"],a=iota(r),s=a.map(function(t){return"i"+t}),u="this.offset+"+a.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),p=a.map(function(t){return"b"+t}).join(","),f=a.map(function(t){return"c"+t}).join(",");o.push("function "+e+"(a,"+p+","+f+",d){this.data=a","this.shape=["+p+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+t+"'","proto.dimension="+r),o.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+a.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===r?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),4>r?(o.push("function "+e+"_order(){"),2===r?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===r&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+e+"_set("+s.join(",")+",v){"),n?o.push("return this.data.set("+u+",v)}"):o.push("return this.data["+u+"]=v}"),o.push("proto.get=function "+e+"_get("+s.join(",")+"){"),n?o.push("return this.data.get("+u+")}"):o.push("return this.data["+u+"]}"),o.push("proto.index=function "+e+"_index(",s.join(),"){return "+u+"}"),o.push("proto.hi=function "+e+"_hi("+s.join(",")+"){return new "+e+"(this.data,"+a.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+a.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var h=a.map(function(t){return"a"+t+"=this.shape["+t+"]"}),c=a.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+e+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+c.join(","));for(var d=0;r>d;++d)o.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");o.push("return new "+e+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+e+"_step("+s.join(",")+"){var "+a.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+a.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;r>d;++d)o.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");o.push("return new "+e+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"b"+t}).join(",")+",c)}");for(var y=new Array(r),l=new Array(r),d=0;r>d;++d)y[d]="a[i"+d+"]",l[d]="b[i"+d+"]";o.push("proto.transpose=function "+e+"_transpose("+s+"){"+s.map(function(t,r){return t+"=("+t+"===undefined?"+r+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+y.join(",")+","+l.join(",")+",this.offset)}"),o.push("proto.pick=function "+e+"_pick("+s+"){var a=[],b=[],c=this.offset");for(var d=0;r>d;++d)o.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+a.map(function(t){return"shape["+t+"]"}).join(",")+","+a.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var i=new Function("CTOR_LIST","ORDER",o.join("\n"));return i(CACHED_CONSTRUCTORS[t],order)}function arrayDType(t){if(isBuffer(t))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function wrappedNDArrayCtor(t,r,e,n){if(void 0===t){var o=CACHED_CONSTRUCTORS.array[0];return o([])}"number"==typeof t&&(t=[t]),void 0===r&&(r=[t.length]);var i=r.length;if(void 0===e){e=new Array(i);for(var a=i-1,s=1;a>=0;--a)e[a]=s,s*=r[a]}if(void 0===n){n=0;for(var a=0;i>a;++a)e[a]<0&&(n-=(r[a]-1)*e[a])}for(var u=arrayDType(t),p=CACHED_CONSTRUCTORS[u];p.length<=i+1;)p.push(compileConstructor(u,p.length-1));var o=p[i+1];return o(t,r,e,n)}var iota=require("iota-array"),isBuffer=require("is-buffer"),hasTypedArrays="undefined"!=typeof Float64Array,CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};module.exports=wrappedNDArrayCtor;
},{"iota-array":40,"is-buffer":41}],40:[function(require,module,exports){
"use strict";function iota(r){for(var t=new Array(r),o=0;r>o;++o)t[o]=o;return t}module.exports=iota;
},{}],41:[function(require,module,exports){
module.exports=function(r){return!(null==r||!(r._isBuffer||r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)))};
},{}],42:[function(require,module,exports){
"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}function linear(a){return a}function relu(a){return _ndarrayOps2["default"].maxseq(a,0),a}function sigmoid(a){return _ndarrayOps2["default"].recipeq(_ndarrayOps2["default"].addseq(_ndarrayOps2["default"].expeq(_ndarrayOps2["default"].negeq(a)),1)),a}function hard_sigmoid(a){_ndarrayOps2["default"].addseq(_ndarrayOps2["default"].mulseq(a,.2),.5);for(var r=0;r<a.size;r++)a.data[r]>1&&(a.data[r]=1),a.data[r]<0&&(a.data[r]=0);return a}function tanh(a){_ndarrayOps2["default"].expeq(_ndarrayOps2["default"].mulseq(a,2));for(var r=0;r<a.size;r++)a.data[r]=(a.data[r]-1)/(a.data[r]+1);return a}function softmax(a){_ndarrayOps2["default"].expeq(a);var r=_ndarrayOps2["default"].sum(a);return _ndarrayOps2["default"].divseq(a,r),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linear=linear,exports.relu=relu,exports.sigmoid=sigmoid,exports.hard_sigmoid=hard_sigmoid,exports.tanh=tanh,exports.softmax=softmax;var _ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps);
},{"ndarray-ops":36}],43:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.timeDistributedDense=exports.repeatVector=exports.maxPooling1DLayer=exports.convolution1DLayer=exports.maxPooling2DLayer=exports.convolution2DLayer=exports.rJZS3Layer=exports.rJZS2Layer=exports.rJZS1Layer=exports.rGRULayer=exports.rLSTMLayer=exports.thresholdedReLuLayer=exports.thresholdedLinearLayer=exports.parametricSoftplusLayer=exports.parametricReLULayer=exports.leakyReLULayer=exports.batchNormalizationLayer=exports.embeddingLayer=exports.flattenLayer=exports.dropoutLayer=exports.denseLayer=void 0;var _dense=require("./layers/dense"),_dropout=require("./layers/dropout"),_flatten=require("./layers/flatten"),_embedding=require("./layers/embedding"),_normalization=require("./layers/normalization"),_advanced_activations=require("./layers/advanced_activations"),_recurrent=require("./layers/recurrent"),_convolutional=require("./layers/convolutional");exports.denseLayer=_dense.denseLayer,exports.dropoutLayer=_dropout.dropoutLayer,exports.flattenLayer=_flatten.flattenLayer,exports.embeddingLayer=_embedding.embeddingLayer,exports.batchNormalizationLayer=_normalization.batchNormalizationLayer,exports.leakyReLULayer=_advanced_activations.leakyReLULayer,exports.parametricReLULayer=_advanced_activations.parametricReLULayer,exports.parametricSoftplusLayer=_advanced_activations.parametricSoftplusLayer,exports.thresholdedLinearLayer=_advanced_activations.thresholdedLinearLayer,exports.thresholdedReLuLayer=_advanced_activations.thresholdedReLuLayer,exports.rLSTMLayer=_recurrent.rLSTMLayer,exports.rGRULayer=_recurrent.rGRULayer,exports.rJZS1Layer=_recurrent.rJZS1Layer,exports.rJZS2Layer=_recurrent.rJZS2Layer,exports.rJZS3Layer=_recurrent.rJZS3Layer,exports.convolution2DLayer=_convolutional.convolution2DLayer,exports.maxPooling2DLayer=_convolutional.maxPooling2DLayer,exports.convolution1DLayer=_convolutional.convolution1DLayer,exports.maxPooling1DLayer=_convolutional.maxPooling1DLayer,exports.repeatVector=_recurrent.repeatVector,exports.timeDistributedDense=_recurrent.timeDistributedDense;
},{"./layers/advanced_activations":44,"./layers/convolutional":45,"./layers/dense":46,"./layers/dropout":47,"./layers/embedding":48,"./layers/flatten":49,"./layers/normalization":50,"./layers/recurrent":51}],44:[function(require,module,exports){
"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}function leakyReLULayer(a,r){var e=arguments.length<=2||void 0===arguments[2]?.3:arguments[2],t=(0,_cwise2["default"])({args:["array","array","array","scalar"],body:function(a,r,e,t){a=(r+e)/2+t*((r-e)/2)}}),n=(0,_ndarray2["default"])(new a(r.size),r.shape),d=(0,_ndarray2["default"])(new a(r.size),r.shape);return _ndarrayOps2["default"].abs(d,r),t(n,r,d,e),n}function parametricReLULayer(a,r,e){var t=(0,_ndarrayPack2["default"])(a,e.alphas),n=(0,_cwise2["default"])({args:["array","array","array","array"],body:function(a,r,e,t){a=(r+e)/2+t*((r-e)/2)}}),d=(0,_ndarray2["default"])(new a(r.size),r.shape),s=(0,_ndarray2["default"])(new a(r.size),r.shape);return _ndarrayOps2["default"].abs(s,r),n(d,r,s,t),d}function parametricSoftplusLayer(a,r,e){var t=(0,_ndarrayPack2["default"])(a,e.alphas),n=(0,_ndarrayPack2["default"])(a,e.betas),d=(0,_ndarray2["default"])(new a(r.size),r.shape);return _ndarrayOps2["default"].mul(d,r,n),_ndarrayOps2["default"].muleq(_ndarrayOps2["default"].logeq(_ndarrayOps2["default"].addseq(_ndarrayOps2["default"].expeq(d),1)),t),d}function thresholdedLinearLayer(a,r){var e=arguments.length<=2||void 0===arguments[2]?1:arguments[2],t=(0,_cwise2["default"])({args:["array","array","array","scalar"],body:function(a,r,e,t){a=t>e?0:r}}),n=(0,_ndarray2["default"])(new a(r.size),r.shape),d=(0,_ndarray2["default"])(new a(r.size),r.shape);return _ndarrayOps2["default"].abs(d,r),t(n,r,d,e),n}function thresholdedReLuLayer(a,r){var e=arguments.length<=2||void 0===arguments[2]?1:arguments[2],t=(0,_cwise2["default"])({args:["array","array","scalar"],body:function(a,r,e){a=r>e?r:0}}),n=(0,_ndarray2["default"])(new a(r.size),r.shape);return t(n,r,e),n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyReLULayer=leakyReLULayer,exports.parametricReLULayer=parametricReLULayer,exports.parametricSoftplusLayer=parametricSoftplusLayer,exports.thresholdedLinearLayer=thresholdedLinearLayer,exports.thresholdedReLuLayer=thresholdedReLuLayer;var _cwise=require("cwise"),_cwise2=_interopRequireDefault(_cwise),_ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayPack=require("../lib/ndarray-pack"),_ndarrayPack2=_interopRequireDefault(_ndarrayPack),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps);
},{"../lib/ndarray-pack":54,"cwise":10,"ndarray":39,"ndarray-ops":36}],45:[function(require,module,exports){
"use strict";function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);return e["default"]=a,e}function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}function convolution2DLayer(a,e,r){var n=arguments.length<=3||void 0===arguments[3]?64:arguments[3],t=arguments.length<=4||void 0===arguments[4]?3:arguments[4],u=arguments.length<=5||void 0===arguments[5]?3:arguments[5],s=arguments.length<=6||void 0===arguments[6]?"valid":arguments[6],l=(arguments.length<=7||void 0===arguments[7]?[1,1]:arguments[7],arguments.length<=8||void 0===arguments[8]?"relu":arguments[8]),o=e.shape[0],i=(0,_ndarrayPack2["default"])(a,r.W),d=(0,_ndarrayPack2["default"])(a,r.b),p=e.shape[1],g=e.shape[2];"valid"===s?(p=e.shape[1]-t+1,g=e.shape[2]-u+1):"same"===s?(p=e.shape[1],g=e.shape[2]):"full"===s&&(p=e.shape[1]+t-1,g=e.shape[2]+u-1);var v=(0,_ndarray2["default"])(new a(n*p*g),[n,p,g]),h=void 0;"same"===s||"full"===s?(h=(0,_ndarray2["default"])(new a(e.shape[0]*(e.shape[1]+2*(t-1))*(e.shape[2]+2*(u-1))),[e.shape[0],e.shape[1]+2*(t-1),e.shape[2]+2*(u-1)]),_ndarrayOps2["default"].assign(h.hi(o,e.shape[1]+t-1,e.shape[2]+u-1).lo(0,t-1,u-1),e)):"valid"===s&&(h=(0,_ndarray2["default"])(new a(e.data),e.shape));for(var m=(0,_ndarray2["default"])(new a(n*h.size),[n,h.shape[0],h.shape[1],h.shape[2]]),f=0;n>f;f++)_ndarrayOps2["default"].assign(m.pick(f,null,null,null),h);if("valid"===s)(0,_convolve2d2["default"])(v,m,i);else if("same"===s){var c=(0,_ndarray2["default"])(new a(n*(e.shape[1]+t-1)*(e.shape[2]+u-1)),[n,e.shape[1]+t-1,e.shape[2]+u-1]);(0,_convolve2d2["default"])(c,m,i);var _=Math.floor((t-1)/2),y=Math.floor((u-1)/2);_ndarrayOps2["default"].assign(v,c.hi(n,p+_,g+y).lo(0,_,y))}else"full"===s&&(0,_convolve2d2["default"])(v,m,i);for(var f=0;n>f;f++)_ndarrayOps2["default"].addseq(v.pick(f,null,null),d.get(f));return activationFuncs[l](v),v}function maxPooling2DLayer(a,e){for(var r=arguments.length<=2||void 0===arguments[2]?[2,2]:arguments[2],n=(arguments.length<=3||void 0===arguments[3]?null:arguments[3],arguments.length<=4||void 0===arguments[4]?!0:arguments[4],Math.floor(e.shape[1]/r[0])),t=Math.floor(e.shape[2]/r[1]),u=(0,_ndarray2["default"])(new a(e.shape[0]*n*t),[e.shape[0],n,t]),s=0;s<e.shape[0];s++)for(var l=0;n>l;l++)for(var o=0;t>o;o++)u.set(s,l,o,_ndarrayOps2["default"].sup(e.pick(s,null,null).hi((l+1)*r[0],(o+1)*r[1]).lo(l*r[0],o*r[1])));return u}function convolution1DLayer(a,e,r){var n=arguments.length<=3||void 0===arguments[3]?64:arguments[3],t=arguments.length<=4||void 0===arguments[4]?3:arguments[4],u=arguments.length<=5||void 0===arguments[5]?"valid":arguments[5],s=arguments.length<=6||void 0===arguments[6]?1:arguments[6],l=arguments.length<=7||void 0===arguments[7]?"relu":arguments[7],o=((0,_ndarrayPack2["default"])(a,r.W),(0,_ndarrayPack2["default"])(a,r.b),(0,_ndarray2["default"])(new a(e.size),[e.shape[1],e.shape[0],1]));_ndarrayOps2["default"].assign(o.pick(null,null,0),e.transpose(1,0));var i=convolution2DLayer(a,o,r,n,t,1,u,[s,1],l),d=(0,_ndarray2["default"])(new a(i.size),[i.shape[1],i.shape[0]]);return _ndarrayOps2["default"].assign(d,i.pick(null,null,0).transpose(1,0)),d}function maxPooling1DLayer(a,e){for(var r=arguments.length<=2||void 0===arguments[2]?2:arguments[2],n=(arguments.length<=3||void 0===arguments[3]?null:arguments[3],arguments.length<=4||void 0===arguments[4]?!0:arguments[4],Math.floor(e.shape[0]/r)),t=(0,_ndarray2["default"])(new a(n*e.shape[1]),[n,e.shape[1]]),u=0;n>u;u++)for(var s=0;s<e.shape[1];s++)t.set(u,s,_ndarrayOps2["default"].sup(e.pick(null,s).hi((u+1)*r).lo(u*r)));return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.convolution2DLayer=convolution2DLayer,exports.maxPooling2DLayer=maxPooling2DLayer,exports.convolution1DLayer=convolution1DLayer,exports.maxPooling1DLayer=maxPooling1DLayer;var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps),_ndarrayPack=require("../lib/ndarray-pack"),_ndarrayPack2=_interopRequireDefault(_ndarrayPack),_convolve2d=require("../lib/cpu/convolve-2d"),_convolve2d2=_interopRequireDefault(_convolve2d),_matrixVectorProduct=require("../lib/cpu/matrix-vector-product"),_matrixVectorProduct2=_interopRequireDefault(_matrixVectorProduct),_activations=require("../functions/activations"),activationFuncs=_interopRequireWildcard(_activations);
},{"../functions/activations":42,"../lib/cpu/convolve-2d":52,"../lib/cpu/matrix-vector-product":53,"../lib/ndarray-pack":54,"ndarray":39,"ndarray-ops":36}],46:[function(require,module,exports){
"use strict";function _interopRequireWildcard(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e["default"]=r,e}function _interopRequireDefault(r){return r&&r.__esModule?r:{"default":r}}function denseLayer(r,e,a){var t=arguments.length<=3||void 0===arguments[3]?"linear":arguments[3],n=(0,_ndarrayPack2["default"])(r,a.W),i=(0,_ndarrayPack2["default"])(r,a.b),u=(0,_ndarray2["default"])(new r(n.shape[1]),[n.shape[1]]);return(0,_matrixVectorProduct2["default"])(u,n.transpose(1,0),e),_ndarrayOps2["default"].addeq(u,i),activationFuncs[t](u),u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseLayer=denseLayer;var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps),_ndarrayPack=require("../lib/ndarray-pack"),_ndarrayPack2=_interopRequireDefault(_ndarrayPack),_matrixVectorProduct=require("../lib/cpu/matrix-vector-product"),_matrixVectorProduct2=_interopRequireDefault(_matrixVectorProduct),_activations=require("../functions/activations"),activationFuncs=_interopRequireWildcard(_activations);
},{"../functions/activations":42,"../lib/cpu/matrix-vector-product":53,"../lib/ndarray-pack":54,"ndarray":39,"ndarray-ops":36}],47:[function(require,module,exports){
"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{"default":r}}function dropoutLayer(r,e){var a=arguments.length<=2||void 0===arguments[2]?.5:arguments[2],t=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(t){var n=(0,_ndarray2["default"])(new r(e.size),e.shape);return _ndarrayOps2["default"].muls(n,e,1-a),n}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dropoutLayer=dropoutLayer;var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps);
},{"ndarray":39,"ndarray-ops":36}],48:[function(require,module,exports){
"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}function embeddingLayer(a,e,r){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],d=(0,_ndarrayPack2["default"])(a,r.E),u=void 0;if(n){var t=e.data.reduce(function(a,e){return a+(e>0?1:0)},0);u=(0,_ndarray2["default"])(new a(t*d.shape[1]),[t,d.shape[1]]);for(var i=0,s=0;s<e.shape[0];s++)e.get(s)>0&&(_ndarrayOps2["default"].assign(u.pick(i,null),d.pick(e.get(s),null)),i+=1)}else{u=(0,_ndarray2["default"])(new a(e.shape[0]*d.shape[1]),[e.shape[0],d.shape[1]]);for(var s=0;s<e.shape[0];s++)_ndarrayOps2["default"].assign(u.pick(s,null),d.pick(e.get(s),null))}return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.embeddingLayer=embeddingLayer;var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps),_ndarrayPack=require("../lib/ndarray-pack"),_ndarrayPack2=_interopRequireDefault(_ndarrayPack);
},{"../lib/ndarray-pack":54,"ndarray":39,"ndarray-ops":36}],49:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function flattenLayer(e,a){if(1===a.shape.length)return a;if(2===a.shape.length){for(var r=(0,_ndarray2["default"])(new e(a.size),[a.size]),n=0;n<a.shape[0];n++)_ndarrayOps2["default"].assign(r.hi((n+1)*a.shape[1]).lo(n*a.shape[1]),a.pick(n,null));return r}if(3===a.shape.length){for(var r=(0,_ndarray2["default"])(new e(a.size),[a.size]),s=0,n=0;n<a.shape[0];n++){s=n*a.shape[1]*a.shape[2];for(var t=0;t<a.shape[1];t++)_ndarrayOps2["default"].assign(r.hi((t+1)*a.shape[2]+s).lo(t*a.shape[2]+s),a.pick(n,t,null))}return r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.flattenLayer=flattenLayer;var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps);
},{"ndarray":39,"ndarray-ops":36}],50:[function(require,module,exports){
"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}function batchNormalizationLayer(a,r,e){var d=arguments.length<=3||void 0===arguments[3]?EPSILON:arguments[3],n=(0,_ndarrayPack2["default"])(a,e.gamma),t=(0,_ndarrayPack2["default"])(a,e.beta),u=(0,_ndarrayPack2["default"])(a,e.mean),_=(0,_ndarrayPack2["default"])(a,e.std),y=(0,_ndarray2["default"])(new a(r.size),r.shape);return _ndarrayOps2["default"].addseq(_,d),_ndarrayOps2["default"].sub(y,r,u),_ndarrayOps2["default"].addeq(_ndarrayOps2["default"].muleq(_ndarrayOps2["default"].diveq(y,_),n),t),y}Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNormalizationLayer=batchNormalizationLayer;var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps),_ndarrayPack=require("../lib/ndarray-pack"),_ndarrayPack2=_interopRequireDefault(_ndarrayPack),EPSILON=1e-6;
},{"../lib/ndarray-pack":54,"ndarray":39,"ndarray-ops":36}],51:[function(require,module,exports){
"use strict";function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var r={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r["default"]=a,r}function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}function rLSTMLayer(a,r,e){function d(){_ndarrayOps2["default"].assign(J,R),(0,_matrixVectorProduct2["default"])(q,u.transpose(1,0),m),(0,_matrixVectorProduct2["default"])(w,p.transpose(1,0),J),_ndarrayOps2["default"].assigns(P,0),_ndarrayOps2["default"].addeq(P,q),_ndarrayOps2["default"].addeq(P,w),_ndarrayOps2["default"].addeq(P,_),activationFuncs[n](P),(0,_matrixVectorProduct2["default"])(v,i.transpose(1,0),m),(0,_matrixVectorProduct2["default"])(x,h.transpose(1,0),J),_ndarrayOps2["default"].assigns(k,0),_ndarrayOps2["default"].addeq(k,v),_ndarrayOps2["default"].addeq(k,x),_ndarrayOps2["default"].addeq(k,c),activationFuncs[n](k),(0,_matrixVectorProduct2["default"])(W,o.transpose(1,0),m),(0,_matrixVectorProduct2["default"])(b,O.transpose(1,0),J),_ndarrayOps2["default"].assigns(V,0),_ndarrayOps2["default"].addeq(V,W),_ndarrayOps2["default"].addeq(V,b),_ndarrayOps2["default"].addeq(V,g),activationFuncs[n](V),(0,_matrixVectorProduct2["default"])(L,l.transpose(1,0),m),(0,_matrixVectorProduct2["default"])(S,f.transpose(1,0),J),_ndarrayOps2["default"].assigns(F,0),_ndarrayOps2["default"].addeq(F,L),_ndarrayOps2["default"].addeq(F,S),_ndarrayOps2["default"].addeq(F,y),activationFuncs[t](F),_ndarrayOps2["default"].muleq(F,P),_ndarrayOps2["default"].mul(z,k,D),_ndarrayOps2["default"].addeq(F,z),_ndarrayOps2["default"].assign(D,F),_ndarrayOps2["default"].mul(R,V,activationFuncs[t](F))}var t=arguments.length<=3||void 0===arguments[3]?"tanh":arguments[3],n=arguments.length<=4||void 0===arguments[4]?"hard_sigmoid":arguments[4],s=arguments.length<=5||void 0===arguments[5]?!1:arguments[5],u=(0,_ndarrayPack2["default"])(a,e.W_xi),p=(0,_ndarrayPack2["default"])(a,e.W_hi),_=(0,_ndarrayPack2["default"])(a,e.b_i),l=(0,_ndarrayPack2["default"])(a,e.W_xc),f=(0,_ndarrayPack2["default"])(a,e.W_hc),y=(0,_ndarrayPack2["default"])(a,e.b_c),i=(0,_ndarrayPack2["default"])(a,e.W_xf),h=(0,_ndarrayPack2["default"])(a,e.W_hf),c=(0,_ndarrayPack2["default"])(a,e.b_f),o=(0,_ndarrayPack2["default"])(a,e.W_xo),O=(0,_ndarrayPack2["default"])(a,e.W_ho),g=(0,_ndarrayPack2["default"])(a,e.b_o),m=(0,_ndarray2["default"])(new a(r.shape[1]),[r.shape[1]]),P=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),q=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),w=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),k=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),v=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),x=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),V=(0,_ndarray2["default"])(new a(g.shape[0]),[g.shape[0]]),W=(0,_ndarray2["default"])(new a(g.shape[0]),[g.shape[0]]),b=(0,_ndarray2["default"])(new a(g.shape[0]),[g.shape[0]]),F=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),L=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),S=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),z=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),D=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),R=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),J=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),Z=void 0;s&&(Z=(0,_ndarray2["default"])(new a(r.shape[0]*y.shape[0]),[r.shape[0],y.shape[0]])),_ndarrayOps2["default"].assigns(R,0);for(var M=0;M<r.shape[0];M++)_ndarrayOps2["default"].assign(m,r.pick(M,null)),d(),s&&_ndarrayOps2["default"].assign(Z.pick(M,null),R);return R}function rGRULayer(a,r,e){function d(){_ndarrayOps2["default"].assign(b,x),(0,_matrixVectorProduct2["default"])(P,u.transpose(1,0),o),(0,_matrixVectorProduct2["default"])(q,p.transpose(1,0),b),_ndarrayOps2["default"].assigns(m,0),_ndarrayOps2["default"].addeq(m,P),_ndarrayOps2["default"].addeq(m,q),_ndarrayOps2["default"].addeq(m,_),activationFuncs[n](m),(0,_matrixVectorProduct2["default"])(k,l.transpose(1,0),o),(0,_matrixVectorProduct2["default"])(v,f.transpose(1,0),b),_ndarrayOps2["default"].assigns(w,0),_ndarrayOps2["default"].addeq(w,k),_ndarrayOps2["default"].addeq(w,v),_ndarrayOps2["default"].addeq(w,y),activationFuncs[n](w),(0,_matrixVectorProduct2["default"])(V,i.transpose(1,0),o),_ndarrayOps2["default"].mul(O,w,b),(0,_matrixVectorProduct2["default"])(W,h.transpose(1,0),O),_ndarrayOps2["default"].assigns(x,0),_ndarrayOps2["default"].addeq(x,V),_ndarrayOps2["default"].addeq(x,W),_ndarrayOps2["default"].addeq(x,c),activationFuncs[t](x),_ndarrayOps2["default"].mul(O,m,b),_ndarrayOps2["default"].assign(g,m),_ndarrayOps2["default"].addseq(_ndarrayOps2["default"].negeq(g),1),_ndarrayOps2["default"].muleq(g,x),_ndarrayOps2["default"].addeq(g,O),_ndarrayOps2["default"].assign(x,g)}var t=arguments.length<=3||void 0===arguments[3]?"tanh":arguments[3],n=arguments.length<=4||void 0===arguments[4]?"hard_sigmoid":arguments[4],s=arguments.length<=5||void 0===arguments[5]?!1:arguments[5],u=(0,_ndarrayPack2["default"])(a,e.W_xz),p=(0,_ndarrayPack2["default"])(a,e.W_hz),_=(0,_ndarrayPack2["default"])(a,e.b_z),l=(0,_ndarrayPack2["default"])(a,e.W_xr),f=(0,_ndarrayPack2["default"])(a,e.W_hr),y=(0,_ndarrayPack2["default"])(a,e.b_r),i=(0,_ndarrayPack2["default"])(a,e.W_xh),h=(0,_ndarrayPack2["default"])(a,e.W_hh),c=(0,_ndarrayPack2["default"])(a,e.b_h),o=(0,_ndarray2["default"])(new a(r.shape[1]),[r.shape[1]]),O=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),g=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),m=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),P=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),q=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),w=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),k=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),v=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),x=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),V=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),W=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),b=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),F=void 0;s&&(F=(0,_ndarray2["default"])(new a(r.shape[0]*c.shape[0]),[r.shape[0],c.shape[0]])),_ndarrayOps2["default"].assigns(x,0);for(var L=0;L<r.shape[0];L++)_ndarrayOps2["default"].assign(o,r.pick(L,null)),d(),s&&_ndarrayOps2["default"].assign(F.pick(L,null),x);return x}function rJZS1Layer(a,r,e){function d(){_ndarrayOps2["default"].assign(V,k),(0,_matrixVectorProduct2["default"])(m,u.transpose(1,0),c),_ndarrayOps2["default"].assigns(g,0),_ndarrayOps2["default"].addeq(g,m),_ndarrayOps2["default"].addeq(g,p),activationFuncs[n](g),(0,_matrixVectorProduct2["default"])(q,_.transpose(1,0),c),(0,_matrixVectorProduct2["default"])(w,l.transpose(1,0),V),_ndarrayOps2["default"].assigns(P,0),_ndarrayOps2["default"].addeq(P,q),_ndarrayOps2["default"].addeq(P,w),_ndarrayOps2["default"].addeq(P,f),activationFuncs[n](P),(0,_matrixVectorProduct2["default"])(v,h.transpose(1,0),c),_ndarrayOps2["default"].mul(o,P,V),(0,_matrixVectorProduct2["default"])(x,y.transpose(1,0),o),_ndarrayOps2["default"].assigns(k,0),_ndarrayOps2["default"].addeq(k,activationFuncs.tanh(v)),_ndarrayOps2["default"].addeq(k,x),_ndarrayOps2["default"].addeq(k,i),activationFuncs[t](k),_ndarrayOps2["default"].mul(o,g,k),_ndarrayOps2["default"].assign(O,g),_ndarrayOps2["default"].addseq(_ndarrayOps2["default"].negeq(O),1),_ndarrayOps2["default"].muleq(O,V),_ndarrayOps2["default"].addeq(O,o),_ndarrayOps2["default"].assign(k,O)}var t=arguments.length<=3||void 0===arguments[3]?"tanh":arguments[3],n=arguments.length<=4||void 0===arguments[4]?"sigmoid":arguments[4],s=arguments.length<=5||void 0===arguments[5]?!1:arguments[5],u=(0,_ndarrayPack2["default"])(a,e.W_xz),p=(0,_ndarrayPack2["default"])(a,e.b_z),_=(0,_ndarrayPack2["default"])(a,e.W_xr),l=(0,_ndarrayPack2["default"])(a,e.W_hr),f=(0,_ndarrayPack2["default"])(a,e.b_r),y=(0,_ndarrayPack2["default"])(a,e.W_hh),i=(0,_ndarrayPack2["default"])(a,e.b_h),h=(0,_ndarrayPack2["default"])(a,e.Pmat),c=(0,_ndarray2["default"])(new a(r.shape[1]),[r.shape[1]]),o=(0,_ndarray2["default"])(new a(p.shape[0]),[p.shape[0]]),O=(0,_ndarray2["default"])(new a(p.shape[0]),[p.shape[0]]),g=(0,_ndarray2["default"])(new a(p.shape[0]),[p.shape[0]]),m=(0,_ndarray2["default"])(new a(p.shape[0]),[p.shape[0]]),P=(0,_ndarray2["default"])(new a(f.shape[0]),[f.shape[0]]),q=(0,_ndarray2["default"])(new a(f.shape[0]),[f.shape[0]]),w=(0,_ndarray2["default"])(new a(f.shape[0]),[f.shape[0]]),k=(0,_ndarray2["default"])(new a(i.shape[0]),[i.shape[0]]),v=(0,_ndarray2["default"])(new a(i.shape[0]),[i.shape[0]]),x=(0,_ndarray2["default"])(new a(i.shape[0]),[i.shape[0]]),V=(0,_ndarray2["default"])(new a(i.shape[0]),[i.shape[0]]),W=void 0;s&&(W=(0,_ndarray2["default"])(new a(r.shape[0]*i.shape[0]),[r.shape[0],i.shape[0]])),_ndarrayOps2["default"].assigns(k,0);for(var b=0;b<r.shape[0];b++)_ndarrayOps2["default"].assign(c,r.pick(b,null)),d(),s&&_ndarrayOps2["default"].assign(W.pick(b,null),k);return k}function rJZS2Layer(a,r,e){function d(){_ndarrayOps2["default"].assign(b,x),(0,_matrixVectorProduct2["default"])(q,u.transpose(1,0),o),(0,_matrixVectorProduct2["default"])(w,p.transpose(1,0),b),_ndarrayOps2["default"].assigns(P,0),_ndarrayOps2["default"].addeq(P,q),_ndarrayOps2["default"].addeq(P,w),_ndarrayOps2["default"].addeq(P,_),activationFuncs[n](P),(0,_matrixVectorProduct2["default"])(O,c.transpose(1,0),o),(0,_matrixVectorProduct2["default"])(v,l.transpose(1,0),b),_ndarrayOps2["default"].assigns(k,0),_ndarrayOps2["default"].addeq(k,O),_ndarrayOps2["default"].addeq(k,v),_ndarrayOps2["default"].addeq(k,f),activationFuncs[n](k),(0,_matrixVectorProduct2["default"])(V,y.transpose(1,0),o),_ndarrayOps2["default"].mul(g,k,b),(0,_matrixVectorProduct2["default"])(W,i.transpose(1,0),g),_ndarrayOps2["default"].assigns(x,0),_ndarrayOps2["default"].addeq(x,V),_ndarrayOps2["default"].addeq(x,W),_ndarrayOps2["default"].addeq(x,h),activationFuncs[t](x),_ndarrayOps2["default"].mul(g,P,x),_ndarrayOps2["default"].assign(m,P),_ndarrayOps2["default"].addseq(_ndarrayOps2["default"].negeq(m),1),_ndarrayOps2["default"].muleq(m,b),_ndarrayOps2["default"].addeq(m,g),_ndarrayOps2["default"].assign(x,m)}var t=arguments.length<=3||void 0===arguments[3]?"tanh":arguments[3],n=arguments.length<=4||void 0===arguments[4]?"sigmoid":arguments[4],s=arguments.length<=5||void 0===arguments[5]?!1:arguments[5],u=(0,_ndarrayPack2["default"])(a,e.W_xz),p=(0,_ndarrayPack2["default"])(a,e.W_hz),_=(0,_ndarrayPack2["default"])(a,e.b_z),l=(0,_ndarrayPack2["default"])(a,e.W_hr),f=(0,_ndarrayPack2["default"])(a,e.b_r),y=(0,_ndarrayPack2["default"])(a,e.W_xh),i=(0,_ndarrayPack2["default"])(a,e.W_hh),h=(0,_ndarrayPack2["default"])(a,e.b_h),c=(0,_ndarrayPack2["default"])(a,e.Pmat),o=(0,_ndarray2["default"])(new a(r.shape[1]),[r.shape[1]]),O=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),g=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),m=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),P=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),q=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),w=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),k=(0,_ndarray2["default"])(new a(f.shape[0]),[f.shape[0]]),v=(0,_ndarray2["default"])(new a(f.shape[0]),[f.shape[0]]),x=(0,_ndarray2["default"])(new a(h.shape[0]),[h.shape[0]]),V=(0,_ndarray2["default"])(new a(h.shape[0]),[h.shape[0]]),W=(0,_ndarray2["default"])(new a(h.shape[0]),[h.shape[0]]),b=(0,_ndarray2["default"])(new a(h.shape[0]),[h.shape[0]]),F=void 0;s&&(F=(0,_ndarray2["default"])(new a(r.shape[0]*h.shape[0]),[r.shape[0],h.shape[0]])),_ndarrayOps2["default"].assigns(x,0);for(var L=0;L<r.shape[0];L++)_ndarrayOps2["default"].assign(o,r.pick(L,null)),d(),s&&_ndarrayOps2["default"].assign(F.pick(L,null),x);return s?F:x}function rJZS3Layer(a,r,e){function d(){_ndarrayOps2["default"].assign(b,x),(0,_matrixVectorProduct2["default"])(P,u.transpose(1,0),o),_ndarrayOps2["default"].assign(F,b),(0,_matrixVectorProduct2["default"])(q,p.transpose(1,0),activationFuncs.tanh(F)),_ndarrayOps2["default"].assigns(m,0),_ndarrayOps2["default"].addeq(m,P),_ndarrayOps2["default"].addeq(m,q),_ndarrayOps2["default"].addeq(m,_),activationFuncs[n](m),(0,_matrixVectorProduct2["default"])(k,l.transpose(1,0),o),(0,_matrixVectorProduct2["default"])(v,f.transpose(1,0),b),_ndarrayOps2["default"].assigns(w,0),_ndarrayOps2["default"].addeq(w,k),_ndarrayOps2["default"].addeq(w,v),_ndarrayOps2["default"].addeq(w,y),activationFuncs[n](w),(0,_matrixVectorProduct2["default"])(V,i.transpose(1,0),o),_ndarrayOps2["default"].mul(O,w,b),(0,_matrixVectorProduct2["default"])(W,h.transpose(1,0),O),_ndarrayOps2["default"].assigns(x,0),_ndarrayOps2["default"].addeq(x,V),_ndarrayOps2["default"].addeq(x,W),_ndarrayOps2["default"].addeq(x,c),activationFuncs[t](x),_ndarrayOps2["default"].mul(O,m,x),_ndarrayOps2["default"].assign(g,m),_ndarrayOps2["default"].addseq(_ndarrayOps2["default"].negeq(g),1),_ndarrayOps2["default"].muleq(g,b),_ndarrayOps2["default"].addeq(g,O),_ndarrayOps2["default"].assign(x,g)}var t=arguments.length<=3||void 0===arguments[3]?"tanh":arguments[3],n=arguments.length<=4||void 0===arguments[4]?"sigmoid":arguments[4],s=arguments.length<=5||void 0===arguments[5]?!1:arguments[5],u=(0,_ndarrayPack2["default"])(a,e.W_xz),p=(0,_ndarrayPack2["default"])(a,e.W_hz),_=(0,_ndarrayPack2["default"])(a,e.b_z),l=(0,_ndarrayPack2["default"])(a,e.W_xr),f=(0,_ndarrayPack2["default"])(a,e.W_hr),y=(0,_ndarrayPack2["default"])(a,e.b_r),i=(0,_ndarrayPack2["default"])(a,e.W_xh),h=(0,_ndarrayPack2["default"])(a,e.W_hh),c=(0,_ndarrayPack2["default"])(a,e.b_h),o=(0,_ndarray2["default"])(new a(r.shape[1]),[r.shape[1]]),O=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),g=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),m=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),P=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),q=(0,_ndarray2["default"])(new a(_.shape[0]),[_.shape[0]]),w=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),k=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),v=(0,_ndarray2["default"])(new a(y.shape[0]),[y.shape[0]]),x=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),V=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),W=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),b=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),F=(0,_ndarray2["default"])(new a(c.shape[0]),[c.shape[0]]),L=void 0;s&&(L=(0,_ndarray2["default"])(new a(r.shape[0]*c.shape[0]),[r.shape[0],c.shape[0]])),_ndarrayOps2["default"].assigns(x,0);for(var S=0;S<r.shape[0];S++)_ndarrayOps2["default"].assign(o,r.pick(S,null)),d(),s&&_ndarrayOps2["default"].assign(L.pick(S,null),x);return x}function repeatVector(a,r,e){if(1!=e)throw"Repeat vector only supports 1 argument";var d=(0,_ndarray2["default"])(r.data,r.shape.concat([1]));return d.transpose(1,0)}function timeDistributedDense(a,r,e,d){var t=(0,_ndarrayPack2["default"])(a,e.W),n=(0,_ndarrayPack2["default"])(a,e.b),s=(0,_ndarray2["default"])(new a(t.shape[1]),[t.shape[1]]);return(0,_matrixVectorProduct2["default"])(s,t.transpose(1,0),(0,_ndarray2["default"])(r.data,[r.shape[0]])),_ndarrayOps2["default"].addeq(s,n),activationFuncs[d](s),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rLSTMLayer=rLSTMLayer,exports.rGRULayer=rGRULayer,exports.rJZS1Layer=rJZS1Layer,exports.rJZS2Layer=rJZS2Layer,exports.rJZS3Layer=rJZS3Layer,exports.repeatVector=repeatVector,exports.timeDistributedDense=timeDistributedDense;var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps),_ndarrayPack=require("../lib/ndarray-pack"),_ndarrayPack2=_interopRequireDefault(_ndarrayPack),_matrixVectorProduct=require("../lib/cpu/matrix-vector-product"),_matrixVectorProduct2=_interopRequireDefault(_matrixVectorProduct),_activations=require("../functions/activations"),activationFuncs=_interopRequireWildcard(_activations);
},{"../functions/activations":42,"../lib/cpu/matrix-vector-product":53,"../lib/ndarray-pack":54,"ndarray":39,"ndarray-ops":36}],52:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(e,r,a){if(r.shape[0]!==a.shape[0]||r.shape[1]!==a.shape[1])throw new Error("first two dimensions of X and H must be equal.");for(var s=r.shape[0],n=r.shape[1],t=r.shape[2]-a.shape[2]+1,u=r.shape[3]-a.shape[3]+1,p=0;t>p;p++)for(var d=0;u>d;d++){var o=(0,_ndarray2["default"])(new r.data.constructor(a.size),a.shape);_ndarrayOps2["default"].mul(o,r.hi(s,n,p+a.shape[2],d+a.shape[3]).lo(0,0,p,d),a.step(1,1,-1,-1));for(var l=0;s>l;l++)e.set(l,p,d,_ndarrayOps2["default"].sum(o.pick(l,null,null,null)))}return e};var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps);
},{"ndarray":39,"ndarray-ops":36}],53:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(e,r,a){for(var l=0;l<r.shape[0];l++)e.set(l,_ndarrayBlasLevel2["default"].dot(r.pick(l,null),a));return e};var _ndarrayBlasLevel=require("ndarray-blas-level1"),_ndarrayBlasLevel2=_interopRequireDefault(_ndarrayBlasLevel);
},{"ndarray-blas-level1":35}],54:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(e,_,n){for(var i=[],r=_,a=1;r instanceof Array;)i.push(r.length),a*=r.length,r=r[0];return 0===i.length?(0,_ndarray2["default"])():(n||(n=(0,_ndarray2["default"])(new e(a),i)),doConvert(n,_),n)};var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_cwiseCompiler=require("cwise-compiler"),_cwiseCompiler2=_interopRequireDefault(_cwiseCompiler),doConvert=(0,_cwiseCompiler2["default"])({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64});
},{"cwise-compiler":6,"ndarray":39}],55:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r["default"]=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,a=Array(e.length);r<e.length;r++)a[r]=e[r];return a}return Array.from(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _typeof(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function recursive_translate(e,r){for(var a in e){var t=e[a];"number"==typeof t?e[a]=t/r:"object"===("undefined"==typeof t?"undefined":_typeof(t))&&recursive_translate(t,r)}return e}function unpack_from_msg(e,r){for(var a=_msgpackLite2["default"].decode(new Uint8Array(e)),t=[],n=0;n<a.length;n++){var i=a[n];-1!=weight_first_list.indexOf(i.layerName)&&(i.parameters=recursive_translate(i.parameters,r)),t.push(i)}return t}var _createClass=function(){function e(e,r){for(var a=0;a<r.length;a++){var t=r[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,a,t){return a&&e(r.prototype,a),t&&e(r,t),r}}();Object.defineProperty(exports,"__esModule",{value:!0});var _ndarrayPack=require("./lib/ndarray-pack"),_ndarrayPack2=_interopRequireDefault(_ndarrayPack),_ndarrayUnpack=require("ndarray-unpack"),_ndarrayUnpack2=_interopRequireDefault(_ndarrayUnpack),_msgpackLite=require("msgpack-lite"),_msgpackLite2=_interopRequireDefault(_msgpackLite),_layers=require("./layers"),layerFuncs=_interopRequireWildcard(_layers),weight_first_list=["timeDistributedDense","denseLayer","embeddingLayer","batchNormalizationLayer","parametricReLULayer","parametricSoftplusLayer","rLSTMLayer","rGRULayer","rJZS1Layer","rJZS2Layer","rJZS3Layer","convolution2DLayer","convolution1DLayer"],NeuralNet=function(){function e(r){_classCallCheck(this,e),r=r||{},"float32"===r.arrayType?this._arrayType=Float32Array:"float64"===r.arrayType?this._arrayType=Float64Array:this._arrayType=Array,"object"===("undefined"==typeof window?"undefined":_typeof(window))?this._environment="browser":"function"==typeof importScripts?this._environment="webworker":"object"===("undefined"==typeof process?"undefined":_typeof(process))&&"function"==typeof require?this._environment="node":this._environment="shell",this._modelFilePath=r.modelFilePath||null,this._layers=[],this._msg_pck_fmt=r.msgPackFmt||!1}return _createClass(e,[{key:"init",value:function(e){if(!this._modelFilePath)throw new Error("no modelFilePath specified in config object.");var r=new XMLHttpRequest;r.open("GET",this._modelFilePath,!0),r.responseType="text",r.onload=function(){if(200!==r.status)return void console.error(r.status);var a=r.response;this._msg_pck_fmt?this._layers=unpack_from_msg(a,this._msg_pck_fmt):this._layers=JSON.parse(a),console.log(this._layers[0].parameters[0].b_r),e()}.bind(this),r.responseType="arraybuffer",r.send()}},{key:"predict",value:function(e){var r=this,a=function(e){var a=!0,t=!1,n=void 0;try{for(var i,o=r._layers[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,l=s.layerName,u=s.parameters;e=layerFuncs[l].apply(layerFuncs,[r._arrayType,e].concat(_toConsumableArray(u)))}}catch(y){t=!0,n=y}finally{try{!a&&o["return"]&&o["return"]()}finally{if(t)throw n}}return e},t=(0,_ndarrayPack2["default"])(this._arrayType,e),n=a(t);return(0,_ndarrayUnpack2["default"])(n)}}]),e}();exports["default"]=NeuralNet;
}).call(this,require('_process'))
},{"./layers":43,"./lib/ndarray-pack":54,"_process":5,"msgpack-lite":16,"ndarray-unpack":38}]},{},[55])(55)
});NeuralNet=NeuralNet.default
